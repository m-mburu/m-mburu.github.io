{
  "hash": "2f303ad2d73a46f25d7b676b97f70fb7",
  "result": {
    "markdown": "---\ntitle: \"Kenya Household Assets\"\nauthor: \"Mburu\"\ndate: \"7/7/2020\"\nformat: \n  html:\n    css: style.css\n    toc: true\n    #toc_depth: 2\n    toc_float:\n      collapsed: no\n      smooth_scroll: no\n    #theme: united\n    highlight: pygments\n  pdf: default\n\n---\n\n\n\n\n\n# Kenya selected households assets 2019 census\n\nI figured that it will be important for me to do this to show why it is impossible for online learning to be adopted in Kenya.\n\nI used 2019 census data set which can be found [here](https://open.africa/dataset/2019-kenya-population-and-housing-census/resource/95eb7a07-71dd-48be-8c82-dd321ab329f1) and the counties shape file can be found [here](https://africaopendata.org/dataset/kenya-counties-shapefile)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Packages used\n\nlibrary(plotly)\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(sf)\nlibrary(DT)\nlibrary(tmap)\nlibrary(ggthemes)\nlibrary(ggiraph)\n```\n:::\n\n\n\n# Read data set\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhousehold_assets <- fread(\"percentage-distribution-of-conventional-households-by-ownership-of-selected-household-assets-201.csv\")\n\n#\nkenya_shapefile <- st_read(\"County\") %>% setDT()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `County' from data source \n  `/home/mburu/personal_projects/github_io_blog/posts/kenya_population/County' \n  using driver `ESRI Shapefile'\nSimple feature collection with 47 features and 8 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 33.91182 ymin: -4.702271 xmax: 41.90626 ymax: 5.430648\nGeodetic CRS:  WGS 84\n```\n:::\n\n```{.r .cell-code}\nkenya_shapefile[, county := tolower(COUNTY)]\n\n# rename column\nsetnames(household_assets, \n         c(\"County / Sub-County\", \"Conventional Households\"  ), \n         c(\"county\", \"households\"))\n```\n:::\n\n\n\n# Some minor cleaning\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# remove commas \nhousehold_assets[, households := as.numeric(gsub(\",|AR K    \", \"\", households))]\n\nhousehold_assets[,  county := tolower(county)]\n\nsub_county <- household_assets %>% \n    group_by(county) %>%\n    filter(households == max(households)) %>% setDT()\n\n\nsub_county_melt <- melt(sub_county, \n                        id.vars = c(\"county\", \"households\"))\n```\n:::\n\n\n\n# % of households with various assets 2019 census\n\n- This is overall data set for the whole country computer devices is ownership about 8.8% this just means that about 91% of the students can't access online learning. This is is just a naive estimation the number could be higher.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkenya_dat <- sub_county_melt[county == \"kenya\"]\n\np <- ggplot(kenya_dat, aes(variable, value, tooltip = paste(variable, \" : \", value))) +\n    geom_bar_interactive(stat = \"identity\", width = 0.5, fill =\"slategray2\"  ) +\n    geom_text_interactive(aes(variable, value, label = paste0(value, \"%\")),\n              position = position_dodge(width = 0.5),\n              vjust = 0.001, size = 3)+\n    labs(x = \"Household assets\", y = \"%\",\n         title = \"% of households with various assets 2019 census\",\n         caption = \"twitter\\n@mmburu_w\")+\n    theme_fivethirtyeight()+\n  theme(\n    axis.text = element_text(size = 7, angle = 45, vjust = 1, hjust =1),\n    plot.title = element_text_interactive(size =11)\n  )\np1 <- girafe(ggobj = p, width_svg = 7, height_svg = 4.5, \n  options = list(\n    opts_sizing(rescale = T) )\n  )\n\np1\n```\n\n::: {.cell-output-display}\n![](household_assets_2019census_files/figure-pdf/unnamed-chunk-3-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n# Merge shapefile with asset data sets\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsub_county_melt[county == \"elgeyo/marakwet\", county := \"keiyo-marakwet\"]\nsub_county_melt[county == \"tharaka-nithi\", county := \"tharaka\"]\nsub_county_melt[county ==  \"taita/taveta\", county := \"taita taveta\"]\nsub_county_melt[county ==  \"nairobi city\", county := \"nairobi\"]\n\ncounty_shapes <- merge(kenya_shapefile, sub_county_melt, by = \"county\") \n\nsetnames(county_shapes, \"value\", \"Percentage\")\n```\n:::\n\n\n\n# Computer devices data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomputer <- county_shapes[variable  %in% c(\"Desk Top\\nComputer/\\nLaptop/ Tablet\")]\n\n# this converts to sf object\ncomputer <- st_set_geometry(computer, \"geometry\")\n```\n:::\n\n\n\n\n# Percentage of households with computer devices per county\n\n- That is if a household owns a tablet, laptop or a desktop\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#ttm()\ntm_shape(computer)+\n    tm_borders(col = \"grey\")+\n    tm_fill(col = \"Percentage\")+\n    tm_layout(title = \"% of households with laptop/tablet/desk top \\n 2019 census\",\n              title.size = 1, title.position = c(0.3, 0.95))\n```\n\n::: {.cell-output-display}\n![](household_assets_2019census_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n#ttm()\n```\n:::\n\n\n\n\n# % of households that can access internet\n\n- This looks like is internet access through mobile phones\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninternet <- county_shapes[variable == \"Internet\"]\n\ninternet <- st_set_geometry(internet, \"geometry\")\n\n#ttm()\ntm_shape(internet)+\n    tm_borders(col = \"grey\")+\n    tm_fill(col = \"Percentage\")+\n    tm_layout(title = \"% of households with internet acess\",\n              title.size = 1, title.position = c(0.3, 0.95))\n```\n\n::: {.cell-output-display}\n![](household_assets_2019census_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n",
    "supporting": [
      "household_assets_2019census_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}