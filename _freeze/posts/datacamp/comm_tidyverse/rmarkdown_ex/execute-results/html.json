{
  "hash": "a2a82db13067a69852ebbcb4e2fe6c0f",
  "result": {
    "markdown": "---\ntitle: \"The reduction in weekly working hours in Europe\" \nsubtitle: \"Looking at the development between 1996 and 2006\"\nauthor: \"Insert your name here\"\noutput:\n  html_document:\n    theme: cosmo\n    highlight: monochrome\n    toc: true\n    toc_float: false\n    toc_depth: 4\n    code_folding: hide\n    css: style.css\n  github_document:\n    toc: true\n    toc_depth: 4\n---\n\n\n## Summary \n\nThe **International Labour Organization (ILO)** has many [data sets](http://www.ilo.org/global/statistics-and-databases/lang--en/index.htm) on working conditions. For example, one can look at how weekly working hours have been decreasing in many countries of the world, while monetary compensation has risen. In this report, *the reduction in weekly working hours* in European countries is analysed, and a comparison between 1996 and 2006 is made. All analysed countries have seen a decrease in weekly working hours since 1996 – some more than others.\n\n## Preparations \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(forcats)\n```\n:::\n\n\n## Analysis\n\n### Data\n\nThe herein used data can be found in the [statistics database of the ILO](http://www.ilo.org/ilostat/faces/wcnav_defaultSelection;ILOSTATCOOKIE=ZOm2Lqrr-OIuzxNGn2_08bNe9AmHQ1kUA6FydqyZJeIudFLb2Yz5!1845546174?_afrLoop=32158017365146&_afrWindowMode=0&_afrWindowId=null#!%40%40%3F_afrWindowId%3Dnull%26_afrLoop%3D32158017365146%26_afrWindowMode%3D0%26_adf.ctrl-state%3D4cwaylvi8_4). For the purpose of this course, it has been slightly preprocessed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(url(\"http://s3.amazonaws.com/assets.datacamp.com/production/course_5807/datasets/ilo_data.RData\"))\n```\n:::\n\n\nThe loaded data contains 380 rows. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Some summary statistics\nilo_data %>%\n  group_by(year) %>%\n  summarize(mean_hourly_compensation = mean(hourly_compensation),\n            mean_working_hours = mean(working_hours))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 27 × 3\n   year  mean_hourly_compensation mean_working_hours\n   <fct>                    <dbl>              <dbl>\n 1 1980                      9.27               34.0\n 2 1981                      8.69               33.6\n 3 1982                      8.36               33.5\n 4 1983                      7.81               33.9\n 5 1984                      7.54               33.7\n 6 1985                      7.79               33.7\n 7 1986                      9.70               34.0\n 8 1987                     12.1                33.6\n 9 1988                     13.2                33.7\n10 1989                     13.1                33.5\n# … with 17 more rows\n```\n:::\n\n```{.r .cell-code}\n  # pipe the above data frame into the knitr::kable function\n```\n:::\n\n\nAs can be seen from the above table, the average weekly working hours of European countries have been decreasing since 1980.\n\n### Preprocessing\n\nThe data is now filtered so it only contains the years 1996 and 2006 – a good time range for comparison. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nilo_data <- ilo_data %>%\n  filter(year == \"1996\" | year == \"2006\")\n  \n# Reorder country factor levels\nilo_data <- ilo_data %>%\n  # Arrange data frame first, so last is always 2006\n  arrange(year) %>%\n  # Use the fct_reorder function inside mutate to reorder countries by working hours in 2006\n  mutate(country = fct_reorder(country,\n                               working_hours,\n                               last))\n```\n:::\n\n\n### Results\n\nIn the following, a plot that shows the reduction of weekly working hours from 1996 to 2006 in each country is produced.\n\nFirst, a custom theme is defined.\n\n\n::: {.cell}\n\n:::\n\n\nThen, the plot is produced. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Compute temporary data set for optimal label placement\nmedian_working_hours <- ilo_data %>%\n  group_by(country) %>%\n  summarize(median_working_hours_per_country = median(working_hours)) %>%\n  ungroup()\n\n# Have a look at the structure of this data set\nstr(median_working_hours)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [17 × 2] (S3: tbl_df/tbl/data.frame)\n $ country                         : Factor w/ 30 levels \"Netherlands\",..: 1 2 3 4 5 6 7 8 9 10 ...\n $ median_working_hours_per_country: num [1:17] 27 27.8 28.4 31 30.9 ...\n```\n:::\n\n```{.r .cell-code}\n# Plot\nggplot(ilo_data) +\n  geom_path(aes(x = working_hours, y = country),\n            arrow = arrow(length = unit(1.5, \"mm\"), type = \"closed\")) +\n  # Add labels for values (both 1996 and 2006)\n  geom_text(\n        aes(x = working_hours,\n            y = country,\n            label = round(working_hours, 1),\n            hjust = ifelse(year == \"2006\", 1.4, -0.4)\n          ),\n        # Change the appearance of the text\n        size = 3,\n        family = \"Bookman\",\n        color = \"gray25\"\n   ) +\n  # Add labels for country\n  geom_text(data = median_working_hours,\n            aes(y = country,\n                x = median_working_hours_per_country,\n                label = country),\n            vjust = 2,\n            family = \"Bookman\",\n            color = \"gray25\") +\n  # Add titles\n  labs(\n    title = \"People work less in 2006 compared to 1996\",\n    subtitle = \"Working hours in European countries, development since 1996\",\n    caption = \"Data source: ILO, 2017\"\n  ) +\n  # Apply your theme \n  theme_ilo() +\n  # Remove axes and grids\n  theme(\n    axis.ticks = element_blank(),\n    axis.title = element_blank(),\n    axis.text = element_blank(),\n    panel.grid = element_blank(),\n    # Also, let's reduce the font size of the subtitle\n    plot.subtitle = element_text(size = 9)\n  ) +\n  # Reset coordinate system\n  coord_cartesian(xlim = c(25, 41))\n```\n\n::: {.cell-output-display}\n![](rmarkdown_ex_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=432}\n:::\n:::\n\n\n#### An interesting correlation\n\nThe results of another analysis are shown here, even though they cannot be reproduced with the data at hand.\n\n![The relationship between weekly working hours and hourly compensation.](http://s3.amazonaws.com/assets.datacamp.com/production/course_5807/datasets/relationship.png)\n\nAs you can see, there's also an interesting relationship. The more people work, the less compensation they seem to receive, which seems kind of unfair. This is quite possibly related to other proxy variables like overall economic stability and performance of a country.\n\n",
    "supporting": [
      "rmarkdown_ex_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}