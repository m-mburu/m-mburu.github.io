<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mburu">
<meta name="dcterms.date" content="2019-01-26">

<title>Mburu Blog - Cancer Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.27/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/dt-core-bootstrap4-1.12.1/css/dataTables.bootstrap4.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-bootstrap4-1.12.1/css/dataTables.bootstrap4.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-bootstrap4-1.12.1/js/jquery.dataTables.min.js"></script>
<script src="../../site_libs/dt-core-bootstrap4-1.12.1/js/dataTables.bootstrap4.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../style.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Mburu Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/m-mburu"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mmburu_w"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cancer Data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mburu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 26, 2019</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="data-set" class="level1">
<h1><strong><em>Data Set</em></strong></h1>
<p>In this tutorial I’m going to predict whether a breast cancer tumor is benign or malignant. Using <a href="https://www.kaggle.com/uciml/breast-cancer-wisconsin-data">Wiscosin breast cancer data set</a> available on Kaggle. The 30 predictors are divided into three parts first is Mean ( variables 3-13), Standard Error(13-23) and Worst(23-32) and each contain 10 parameter (radius, texture,area, perimeter, smoothness,compactness,concavity,concave points,symmetry and fractal dimension of the tumor). When predicting cancer breast tumor types there two types of cost;</p>
<ul>
<li>The cost of telling someone who has malignant tumor that they have benign these are the false negatives in this case someone might not seek medical help which is can cause death.</li>
<li>Telling someone that they have malignant type of tumor but they don’t which is usually false positives. In this case you subject someone to unnecessary stress</li>
</ul>
<p>So it’s highly desirable that our model has good accuracy $ f_1 score$ and high recall.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xgboost)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(e1071)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">1</span>, <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>cancer <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>cancer[, V33 <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cancer)  <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-76049cddb6edabff4aa4" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-76049cddb6edabff4aa4">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],[842302,842517,84300903,84348301,84358402,843786],["M","M","M","M","M","M"],[17.99,20.57,19.69,11.42,20.29,12.45],[10.38,17.77,21.25,20.38,14.34,15.7],[122.8,132.9,130,77.58,135.1,82.57],[1001,1326,1203,386.1,1297,477.1],[0.1184,0.08474,0.1096,0.1425,0.1003,0.1278],[0.2776,0.07864,0.1599,0.2839,0.1328,0.17],[0.3001,0.0869,0.1974,0.2414,0.198,0.1578],[0.1471,0.07017,0.1279,0.1052,0.1043,0.08089],[0.2419,0.1812,0.2069,0.2597,0.1809,0.2087],[0.07871,0.05667,0.05999,0.09744,0.05883,0.07613],[1.095,0.5435,0.7456,0.4956,0.7572,0.3345],[0.9053,0.7339,0.7869,1.156,0.7813,0.8902],[8.589,3.398,4.585,3.445,5.438,2.217],[153.4,74.08,94.03,27.23,94.44,27.19],[0.006399,0.005225,0.00615,0.00911,0.01149,0.00751],[0.04904,0.01308,0.04006,0.07458,0.02461,0.03345],[0.05373,0.0186,0.03832,0.05661,0.05688,0.03672],[0.01587,0.0134,0.02058,0.01867,0.01885,0.01137],[0.03003,0.01389,0.0225,0.05963,0.01756,0.02165],[0.006193,0.003532,0.004571,0.009208,0.005115,0.005082],[25.38,24.99,23.57,14.91,22.54,15.47],[17.33,23.41,25.53,26.5,16.67,23.75],[184.6,158.8,152.5,98.87,152.2,103.4],[2019,1956,1709,567.7,1575,741.6],[0.1622,0.1238,0.1444,0.2098,0.1374,0.1791],[0.6656,0.1866,0.4245,0.8663,0.205,0.5249],[0.7119,0.2416,0.4504,0.6869,0.4,0.5355],[0.2654,0.186,0.243,0.2575,0.1625,0.1741],[0.4601,0.275,0.3613,0.6638,0.2364,0.3985],[0.1189,0.08902,0.08758,0.173,0.07678,0.1244]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>diagnosis<\/th>\n      <th>radius_mean<\/th>\n      <th>texture_mean<\/th>\n      <th>perimeter_mean<\/th>\n      <th>area_mean<\/th>\n      <th>smoothness_mean<\/th>\n      <th>compactness_mean<\/th>\n      <th>concavity_mean<\/th>\n      <th>concave points_mean<\/th>\n      <th>symmetry_mean<\/th>\n      <th>fractal_dimension_mean<\/th>\n      <th>radius_se<\/th>\n      <th>texture_se<\/th>\n      <th>perimeter_se<\/th>\n      <th>area_se<\/th>\n      <th>smoothness_se<\/th>\n      <th>compactness_se<\/th>\n      <th>concavity_se<\/th>\n      <th>concave points_se<\/th>\n      <th>symmetry_se<\/th>\n      <th>fractal_dimension_se<\/th>\n      <th>radius_worst<\/th>\n      <th>texture_worst<\/th>\n      <th>perimeter_worst<\/th>\n      <th>area_worst<\/th>\n      <th>smoothness_worst<\/th>\n      <th>compactness_worst<\/th>\n      <th>concavity_worst<\/th>\n      <th>concave points_worst<\/th>\n      <th>symmetry_worst<\/th>\n      <th>fractal_dimension_worst<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="visualization-and-feature-selection" class="level1">
<h1><strong><em>Visualization and Feature selection</em></strong></h1>
<section id="percentage-of-women-with-malignant-tumor" class="level2">
<h2 class="anchored" data-anchor-id="percentage-of-women-with-malignant-tumor"><strong><em>Percentage of women with malignant tumor</em></strong></h2>
<p>The percentage of women with malignant tumor is 37.26%(212 out 569) while the rest 62.74%(357) had benign tumors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cancer[, .(<span class="at">freq =</span> .N),</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>       by <span class="ot">=</span> diagnosis] <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    .[, perc <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> freq<span class="sc">/</span><span class="fu">sum</span>(freq), <span class="dv">2</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>diagnosis, <span class="at">y=</span>perc, <span class="at">fill =</span> diagnosis)) <span class="sc">+</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width  =</span> <span class="fl">0.5</span>)<span class="sc">+</span> <span class="fu">theme_hc</span>() <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span>diagnosis, <span class="at">y=</span>perc, <span class="at">label =</span> <span class="fu">paste</span>(perc, <span class="st">"%"</span>)),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span>  <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">vjust =</span> <span class="fl">0.05</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_hc</span>(<span class="at">name =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Cancer Type"</span>,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Percentage"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Percentage of women with benign or malignant breast bancer"</span>)<span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span><span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="624"></p>
</div>
</div>
</section>
<section id="boxplots" class="level2">
<h2 class="anchored" data-anchor-id="boxplots"><strong><em>Boxplots</em></strong></h2>
<p>From the boxplots we can identify variables where we expect there is a significance difference between the two groups of cancer tumors. When using a boxplot if two distributions do not averlap or more than 75% of two boxplot do not overlap then we expect that there is a significance difference in the mean/median between the two groups. Some of the variables where the distribution of two cancer tumors are significantly different are radius_mean, texture_mean etc. The visible differences between malignant tumors and benign tumors can be seen in means of all cells and worst means where worst means is the average of all the worst cells. The distribution of malignant tumors have higher scores than the benign tumors in this cases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cancerm <span class="ot">&lt;-</span> <span class="fu">melt</span>(cancer[, <span class="sc">-</span><span class="dv">1</span>, <span class="at">with =</span> F], <span class="at">id.vars =</span> <span class="st">"diagnosis"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cancerm, <span class="fu">aes</span>(<span class="at">x =</span> diagnosis, <span class="at">y =</span> value))<span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>variable, <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="1056"></p>
</div>
</div>
</section>
<section id="features-scaling" class="level2">
<h2 class="anchored" data-anchor-id="features-scaling"><strong><em>Features Scaling</em></strong></h2>
<p>We find that some variables are highly correlated. We can use principle component analysis for dimension reduction. Since variables are correlated it’s evident that we can use a smaller set of features to build our models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>cancer[, id <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>predictors <span class="ot">&lt;-</span> <span class="fu">names</span>(cancer)[<span class="dv">3</span><span class="sc">:</span><span class="dv">31</span>]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>cancer[, (predictors) <span class="sc">:</span><span class="er">=</span> <span class="fu">lapply</span>(.SD, <span class="cf">function</span>(x) <span class="fu">scale</span>(x)), .SDcols <span class="ot">=</span> predictors ]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>cancer[, diagnosis <span class="sc">:</span><span class="er">=</span> <span class="fu">as.factor</span>(diagnosis)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="correlation-matrix" class="level2">
<h2 class="anchored" data-anchor-id="correlation-matrix"><strong><em>Correlation matrix</em></strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(cancer[, <span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), <span class="at">with =</span> F]) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>), <span class="at">style =</span> <span class="st">"bootstrap4"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-613901501786e1b866f3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-613901501786e1b866f3">{"x":{"style":"bootstrap4","filter":"none","vertical":false,"data":[["texture_mean","perimeter_mean","area_mean","smoothness_mean","compactness_mean","concavity_mean","concave points_mean","symmetry_mean","fractal_dimension_mean","radius_se","texture_se","perimeter_se","area_se","smoothness_se","compactness_se","concavity_se","concave points_se","symmetry_se","fractal_dimension_se","radius_worst","texture_worst","perimeter_worst","area_worst","smoothness_worst","compactness_worst","concavity_worst","concave points_worst","symmetry_worst","fractal_dimension_worst"],[1,0.32953305868657,0.321085696080207,-0.0233885159984236,0.236702222074372,0.302417827943891,0.293464051313943,0.071400980483317,-0.0764371834481339,0.275868676173762,0.38635762272449,0.281673114787203,0.259844986610098,0.00661377735358533,0.191974611323967,0.143293076560498,0.163851025285218,0.00912716775503605,0.0544575195689336,0.352572947150296,0.912044588840422,0.358039575053224,0.34354594718647,0.0775033588221289,0.277829592478979,0.301025223816491,0.295315843337737,0.105007910315972,0.119205351397085],[0.32953305868657,1,0.98650680399139,0.207278163691006,0.556936210879562,0.716135650117404,0.85097704125282,0.183027212116853,-0.261476908066334,0.691765013533482,-0.0867610783117949,0.693134889540866,0.744982694119068,-0.202694026298322,0.250743680740588,0.228082345393658,0.407216915998619,-0.0816293270283995,-0.00552339105700396,0.969476363466314,0.30303837155715,0.970386887042639,0.941549808002307,0.150549404317037,0.455774228038327,0.563879263473662,0.771240789360549,0.189115040462457,0.0510185297234066],[0.321085696080207,0.98650680399139,1,0.177028377254001,0.498501682152412,0.685982828551911,0.823268868652433,0.151293079035112,-0.283109811691426,0.732562226997297,-0.0662802136045774,0.726628327790684,0.800085921234321,-0.166776666601113,0.212582550779233,0.207660060482569,0.37232028233071,-0.0724965882117627,-0.019886963235068,0.962746086047083,0.287488627121397,0.959119574355265,0.9592133256499,0.123522938755571,0.390410309242499,0.512605920443325,0.722016626260358,0.143569913889071,0.00373759735157159],[-0.0233885159984236,0.207278163691006,0.177028377254001,1,0.659123215215923,0.52198376771426,0.55369517274376,0.557774788072887,0.584792001949978,0.30146709825317,0.0684064481711825,0.296091932893514,0.246552431665735,0.332375442647592,0.318943296705379,0.248395679882555,0.380675690983286,0.200774375920483,0.283606698546885,0.213120141895949,0.0360717987856464,0.23885262620915,0.206718363428577,0.805324195494363,0.472468443730443,0.434925714725087,0.50305335329895,0.394309481811755,0.499316368593766],[0.236702222074372,0.556936210879562,0.498501682152412,0.659123215215923,1,0.883120670177251,0.831135043133699,0.602641048405516,0.565368663414522,0.497473446085062,0.0462048307164068,0.548905264588823,0.455652851987889,0.135299267700472,0.738721789660392,0.570516871489889,0.642261850971647,0.229976590801432,0.507318126900422,0.535315398217666,0.248132833277418,0.590210427731298,0.50960380555792,0.565541166375088,0.865809039802263,0.816275249800029,0.815573223569065,0.510223429921806,0.687382322753897],[0.302417827943891,0.716135650117404,0.685982828551911,0.52198376771426,0.883120670177251,1,0.921391026378859,0.500666617141962,0.336783359421185,0.631924822141491,0.07621834813534,0.660390787241962,0.617426805845241,0.0985637457991174,0.67027882464302,0.691270207544851,0.683259916512327,0.178009207920878,0.449300749050338,0.688236407643673,0.299878888709691,0.729564916513202,0.675987231306089,0.44882203840476,0.754968015906397,0.884102639094382,0.861323033637951,0.409464126539986,0.514929890636387],[0.293464051313943,0.85097704125282,0.823268868652433,0.55369517274376,0.831135043133699,0.921391026378859,1,0.462497388367358,0.166917383226992,0.698049833560741,0.0214795819234017,0.710649871613899,0.690298539759553,0.0276533083871362,0.490424249593571,0.439167068474262,0.615634130896919,0.0953507868866769,0.257583746243033,0.830317631118615,0.292751713001518,0.855923128134311,0.809629619909619,0.452753054179048,0.667453676825712,0.752399497574965,0.910155314298594,0.375744145423611,0.368661133716771],[0.071400980483317,0.183027212116853,0.151293079035112,0.557774788072887,0.602641048405516,0.500666617141962,0.462497388367358,1,0.479921330050969,0.303379263207263,0.128052926340256,0.313892760796514,0.22397021941763,0.187321165261391,0.421659147005011,0.34262702307772,0.393297872089017,0.449136542393429,0.331786146273124,0.185727753495688,0.0906506881166428,0.219168559111058,0.177193377374097,0.426675026384947,0.473200013244618,0.433721007590173,0.430296611457954,0.699825797643731,0.438413498444603],[-0.0764371834481339,-0.261476908066334,-0.283109811691426,0.584792001949978,0.565368663414522,0.336783359421185,0.166917383226992,0.479921330050969,1,0.00011099507262947,0.164173965871729,0.0398299315720471,-0.0901702475204273,0.401964425448413,0.559836690621134,0.446630321699571,0.341198044397118,0.345007397143728,0.688131577458552,-0.25369149487661,-0.0512692020367651,-0.205151211262774,-0.231854451167561,0.504942075351762,0.45879815666786,0.346233876348068,0.175325449243245,0.334018683851083,0.767296779238436],[0.275868676173762,0.691765013533482,0.732562226997297,0.30146709825317,0.497473446085062,0.631924822141491,0.698049833560741,0.303379263207263,0.00011099507262947,1,0.213247337251158,0.972793677016075,0.951830112110991,0.164514219812812,0.356064575532203,0.33235753760761,0.513346441436765,0.240567362450071,0.227753532671981,0.715065195135185,0.194798556834251,0.719683803665006,0.75154847612662,0.141918552918607,0.28710316560074,0.380584634628722,0.531062327821605,0.0945428303543819,0.0495594324645731],[0.38635762272449,-0.0867610783117949,-0.0662802136045774,0.0684064481711825,0.0462048307164068,0.07621834813534,0.0214795819234017,0.128052926340256,0.164173965871729,0.213247337251158,1,0.223170728630714,0.111567247218039,0.39724285264121,0.231699698976237,0.194998464458819,0.230283399557033,0.411620680197539,0.279722747719194,-0.11169031312493,0.409002766315306,-0.102241921887433,-0.0831949885850467,-0.0736576591011854,-0.0924393536181939,-0.0689562205464562,-0.119637523139846,-0.12821475779253,-0.0456545685932071],[0.281673114787203,0.693134889540866,0.726628327790684,0.296091932893514,0.548905264588823,0.660390787241962,0.710649871613899,0.313892760796514,0.0398299315720471,0.972793677016075,0.223170728630714,1,0.937655406954416,0.151075331208413,0.416322367992462,0.362481582270449,0.556264083654397,0.266487091864023,0.244142773416286,0.697200592720646,0.200370853959451,0.721031309989018,0.730712973130283,0.13005439199101,0.341919445371206,0.418898815730572,0.554897230628211,0.10993043423135,0.0854325720566573],[0.259844986610098,0.744982694119068,0.800085921234321,0.246552431665735,0.455652851987889,0.617426805845241,0.690298539759553,0.22397021941763,-0.0901702475204273,0.951830112110991,0.111567247218039,0.937655406954416,1,0.0751503381219938,0.284840056541161,0.270894726190632,0.4157295683714,0.134108979692475,0.127070902978013,0.757373188924016,0.19649664907281,0.761212636068759,0.811407960931728,0.125389430516091,0.283256537537455,0.385100135598529,0.538166313895736,0.074126291599528,0.0175392951323854],[0.00661377735358533,-0.202694026298322,-0.166776666601113,0.332375442647592,0.135299267700472,0.0985637457991174,0.0276533083871362,0.187321165261391,0.401964425448413,0.164514219812812,0.39724285264121,0.151075331208413,0.0751503381219938,1,0.336696080505445,0.268684759872263,0.328429499109679,0.413506125207898,0.427374206723158,-0.230690709845148,-0.0747429648767563,-0.217303754581862,-0.182195478059099,0.314457455980828,-0.0555581387150508,-0.0582983867434454,-0.102006796337465,-0.107342097789145,0.101480315042525],[0.191974611323967,0.250743680740588,0.212582550779233,0.318943296705379,0.738721789660392,0.67027882464302,0.490424249593571,0.421659147005011,0.559836690621134,0.356064575532203,0.231699698976237,0.416322367992462,0.284840056541161,0.336696080505445,1,0.801268342738329,0.744082667695325,0.394712834762032,0.803268817661767,0.204607165947482,0.143002583295717,0.260515839647209,0.199371329091014,0.227394232305423,0.678780354372496,0.63914669775592,0.483208326825614,0.277878430714635,0.59097276250479],[0.143293076560498,0.228082345393658,0.207660060482569,0.248395679882555,0.570516871489889,0.691270207544851,0.439167068474262,0.34262702307772,0.446630321699571,0.33235753760761,0.194998464458819,0.362481582270449,0.270894726190632,0.268684759872263,0.801268342738329,1,0.771803994923846,0.309428577984451,0.727372183881193,0.186903515685898,0.100240983748346,0.226680425590901,0.188352652089531,0.168481320791367,0.484857800686469,0.662564133742742,0.440472263046223,0.197787821861411,0.439329268575791],[0.163851025285218,0.407216915998619,0.37232028233071,0.380675690983286,0.642261850971647,0.683259916512327,0.615634130896919,0.393297872089017,0.341198044397118,0.513346441436765,0.230283399557033,0.556264083654397,0.4157295683714,0.328429499109679,0.744082667695325,0.771803994923846,1,0.312780223209733,0.611044139380723,0.358126669241042,0.0867412099428685,0.394999251774185,0.342271162092682,0.215350596815934,0.452888377369881,0.549592375235193,0.602449605920987,0.14311566863305,0.31065455149383],[0.00912716775503605,-0.0816293270283995,-0.0724965882117627,0.200774375920483,0.229976590801432,0.178009207920878,0.0953507868866769,0.449136542393429,0.345007397143728,0.240567362450071,0.411620680197539,0.266487091864023,0.134108979692475,0.413506125207898,0.394712834762032,0.309428577984451,0.312780223209733,1,0.369078083365729,-0.128120769072743,-0.077473420184079,-0.103753043843325,-0.110342742895499,-0.0126617995659087,0.0602548794653667,0.0371190485999285,-0.030413396423601,0.389402484884646,0.0780794762726677],[0.0544575195689336,-0.00552339105700396,-0.019886963235068,0.283606698546885,0.507318126900422,0.449300749050338,0.257583746243033,0.331786146273124,0.688131577458552,0.227753532671981,0.279722747719194,0.244142773416286,0.127070902978013,0.427374206723158,0.803268817661767,0.727372183881193,0.611044139380723,0.369078083365729,1,-0.0374876178626734,-0.00319502886808958,-0.00100039762596681,-0.0227361473089005,0.170568315953142,0.390158842086675,0.379974661457079,0.215204013310029,0.111093955755724,0.591328065660875],[0.352572947150296,0.969476363466314,0.962746086047083,0.213120141895949,0.535315398217666,0.688236407643673,0.830317631118615,0.185727753495688,-0.25369149487661,0.715065195135185,-0.11169031312493,0.697200592720646,0.757373188924016,-0.230690709845148,0.204607165947482,0.186903515685898,0.358126669241042,-0.128120769072743,-0.0374876178626734,1,0.359920754221048,0.993707916102951,0.984014564459074,0.216574431259696,0.475820037460147,0.573974708099304,0.787423851712241,0.243529204291313,0.0934919786793017],[0.912044588840422,0.30303837155715,0.287488627121397,0.0360717987856464,0.248132833277418,0.299878888709691,0.292751713001518,0.0906506881166428,-0.0512692020367651,0.194798556834251,0.409002766315306,0.200370853959451,0.19649664907281,-0.0747429648767563,0.143002583295717,0.100240983748346,0.0867412099428685,-0.077473420184079,-0.00319502886808958,0.359920754221048,1,0.365098245408619,0.345842282526797,0.225429414909487,0.360832338597973,0.368365607459945,0.359754609525037,0.233027461445317,0.219122425463159],[0.358039575053224,0.970386887042639,0.959119574355265,0.23885262620915,0.590210427731298,0.729564916513202,0.855923128134311,0.219168559111058,-0.205151211262774,0.719683803665006,-0.102241921887433,0.721031309989018,0.761212636068759,-0.217303754581862,0.260515839647209,0.226680425590901,0.394999251774185,-0.103753043843325,-0.00100039762596681,0.993707916102951,0.365098245408619,1,0.977578091406388,0.23677460388607,0.529407690164103,0.618344079533516,0.816322101687545,0.269492769083817,0.138956861845758],[0.34354594718647,0.941549808002307,0.9592133256499,0.206718363428577,0.50960380555792,0.675987231306089,0.809629619909619,0.177193377374097,-0.231854451167561,0.75154847612662,-0.0831949885850467,0.730712973130283,0.811407960931728,-0.182195478059099,0.199371329091014,0.188352652089531,0.342271162092682,-0.110342742895499,-0.0227361473089005,0.984014564459074,0.345842282526797,0.977578091406388,1,0.20914533376029,0.438296283779674,0.54333052541108,0.747418802322818,0.209145508387079,0.079647034024676],[0.0775033588221289,0.150549404317037,0.123522938755571,0.805324195494363,0.565541166375088,0.44882203840476,0.452753054179048,0.426675026384947,0.504942075351762,0.141918552918607,-0.0736576591011854,0.13005439199101,0.125389430516091,0.314457455980828,0.227394232305423,0.168481320791367,0.215350596815934,-0.0126617995659087,0.170568315953142,0.216574431259696,0.225429414909487,0.23677460388607,0.20914533376029,1,0.568186516685607,0.518523292864002,0.547690902949788,0.493838330235759,0.617624191655438],[0.277829592478979,0.455774228038327,0.390410309242499,0.472468443730443,0.865809039802263,0.754968015906397,0.667453676825712,0.473200013244618,0.45879815666786,0.28710316560074,-0.0924393536181939,0.341919445371206,0.283256537537455,-0.0555581387150508,0.678780354372496,0.484857800686469,0.452888377369881,0.0602548794653667,0.390158842086675,0.475820037460147,0.360832338597973,0.529407690164103,0.438296283779674,0.568186516685607,1,0.892260898776469,0.801080364635253,0.614440501149306,0.810454856311612],[0.301025223816491,0.563879263473662,0.512605920443325,0.434925714725087,0.816275249800029,0.884102639094382,0.752399497574965,0.433721007590173,0.346233876348068,0.380584634628722,-0.0689562205464562,0.418898815730572,0.385100135598529,-0.0582983867434454,0.63914669775592,0.662564133742742,0.549592375235193,0.0371190485999285,0.379974661457079,0.573974708099304,0.368365607459945,0.618344079533516,0.54333052541108,0.518523292864002,0.892260898776469,1,0.855433860343999,0.532519729118362,0.686510921244863],[0.295315843337737,0.771240789360549,0.722016626260358,0.50305335329895,0.815573223569065,0.861323033637951,0.910155314298594,0.430296611457954,0.175325449243245,0.531062327821605,-0.119637523139846,0.554897230628211,0.538166313895736,-0.102006796337465,0.483208326825614,0.440472263046223,0.602449605920987,-0.030413396423601,0.215204013310029,0.787423851712241,0.359754609525037,0.816322101687545,0.747418802322818,0.547690902949788,0.801080364635253,0.855433860343999,1,0.502528493830698,0.511114145886339],[0.105007910315972,0.189115040462457,0.143569913889071,0.394309481811755,0.510223429921806,0.409464126539986,0.375744145423611,0.699825797643731,0.334018683851083,0.0945428303543819,-0.12821475779253,0.10993043423135,0.074126291599528,-0.107342097789145,0.277878430714635,0.197787821861411,0.14311566863305,0.389402484884646,0.111093955755724,0.243529204291313,0.233027461445317,0.269492769083817,0.209145508387079,0.493838330235759,0.614440501149306,0.532519729118362,0.502528493830698,1,0.537848206253608],[0.119205351397085,0.0510185297234066,0.00373759735157159,0.499316368593766,0.687382322753897,0.514929890636387,0.368661133716771,0.438413498444603,0.767296779238436,0.0495594324645731,-0.0456545685932071,0.0854325720566573,0.0175392951323854,0.101480315042525,0.59097276250479,0.439329268575791,0.31065455149383,0.0780794762726677,0.591328065660875,0.0934919786793017,0.219122425463159,0.138956861845758,0.079647034024676,0.617624191655438,0.810454856311612,0.686510921244863,0.511114145886339,0.537848206253608,1]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>texture_mean<\/th>\n      <th>perimeter_mean<\/th>\n      <th>area_mean<\/th>\n      <th>smoothness_mean<\/th>\n      <th>compactness_mean<\/th>\n      <th>concavity_mean<\/th>\n      <th>concave points_mean<\/th>\n      <th>symmetry_mean<\/th>\n      <th>fractal_dimension_mean<\/th>\n      <th>radius_se<\/th>\n      <th>texture_se<\/th>\n      <th>perimeter_se<\/th>\n      <th>area_se<\/th>\n      <th>smoothness_se<\/th>\n      <th>compactness_se<\/th>\n      <th>concavity_se<\/th>\n      <th>concave points_se<\/th>\n      <th>symmetry_se<\/th>\n      <th>fractal_dimension_se<\/th>\n      <th>radius_worst<\/th>\n      <th>texture_worst<\/th>\n      <th>perimeter_worst<\/th>\n      <th>area_worst<\/th>\n      <th>smoothness_worst<\/th>\n      <th>compactness_worst<\/th>\n      <th>concavity_worst<\/th>\n      <th>concave points_worst<\/th>\n      <th>symmetry_worst<\/th>\n      <th>fractal_dimension_worst<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="principle-component-analysis" class="level2">
<h2 class="anchored" data-anchor-id="principle-component-analysis"><strong><em>Principle Component Analysis</em></strong></h2>
<p>Using the elbow rule we can use the first 5 principle components. Using 15 principle components we will have achieved al most 100% of the variance from the original data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(cancer[, predictors, <span class="at">with =</span> F], <span class="at">scale. =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variance-explained" class="level2">
<h2 class="anchored" data-anchor-id="variance-explained"><strong><em>Variance Explained</em></strong></h2>
<p>Since PCA forms new characteristics the variance explained plot shows the amount of variation of the original features captured by each principle component. The new features are simply linear combinations of the old features.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stdpca <span class="ot">&lt;-</span> pca<span class="sc">$</span>sdev</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>varpca <span class="ot">&lt;-</span> stdpca<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>prop_var <span class="ot">&lt;-</span> varpca<span class="sc">/</span><span class="fu">sum</span>(varpca)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>prop_var <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 43.706363 18.472237  9.716239  6.816736  5.676223  4.161723  2.292352
 [8]  1.643434  1.363238  1.191515  1.011032  0.897368  0.832105  0.539193
[15]  0.323823  0.269517  0.198317  0.178851  0.153573  0.107095  0.102579
[22]  0.093821  0.082603  0.058725  0.053331  0.027514  0.022985  0.005110
[29]  0.002394</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(prop_var[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9864</code></pre>
</div>
</div>
</section>
<section id="scree-plot" class="level2">
<h2 class="anchored" data-anchor-id="scree-plot"><strong><em>Scree plot</em></strong></h2>
<p>Scree plot shows the variance explained by each principle component which reduces as the number of principle components increase.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prop_var, <span class="at">xlab =</span> <span class="st">"Principal Component"</span>,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Proportion of Variance Explained"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="cumulative-variance-explained" class="level2">
<h2 class="anchored" data-anchor-id="cumulative-variance-explained"><strong><em>Cumulative Variance Explained</em></strong></h2>
<p>The cumulative of variance plot helps to choose the number of features based on the amount of variation from original data set you want captured. In this case, I wanted to use number of principle components that capture almost 100% of the variation. After trying with different number of principle components I found out that the accuracy of the models did not increase after the 15th principle components.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>cum_var <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(prop_var)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cum_var, <span class="at">xlab =</span> <span class="st">"Principal Component"</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Cumulative Proportion of Variance Explained"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="construct-new-data-set" class="level2">
<h2 class="anchored" data-anchor-id="construct-new-data-set"><strong><em>Construct new data set</em></strong></h2>
<p>We use the first 15 principle components as our new predictors, then we randomly split data into training and test set in 7:3 ratio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>train_sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(cancer), <span class="fu">round</span>(<span class="fl">0.7</span><span class="sc">*</span><span class="fu">nrow</span>(cancer)))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>pcadat <span class="ot">&lt;-</span> <span class="fu">data.table</span>( <span class="at">label =</span> cancer<span class="sc">$</span>diagnosis, pca<span class="sc">$</span>x[,<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]) </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>pcadat[, label <span class="sc">:</span><span class="er">=</span> <span class="fu">factor</span>(label, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"B"</span>))]</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> pcadat[train_sample,]</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> pcadat[<span class="sc">-</span>train_sample,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="model-fitting" class="level1">
<h1><strong><em>Model Fitting</em></strong></h1>
<ul>
<li>Some of the importants terms to understand: Accuracy:</li>
</ul>
<p><span class="math display">\[Accuracy  = \frac{True\: positives+ True \; Negatives \;Classes}{N}\]</span></p>
<ul>
<li><p>Precision: Of all the patients we predicted that they have cancer malignant how many actually have cancer <span class="math display">\[Precision  = \frac{True \; Positives}{Predicted \; Positives}\]</span></p></li>
<li><p>Recall(sensitivity): Of all the patients that have malignant cancer how many did we detect. This is the true positive rate <span class="math display">\[Recall= \frac{True \; Positives}{Actual \; Positives}\]</span></p></li>
<li><p>Specifity is the true negative rate. Of all the patient who did not have malignant tumors how many did we detect <span class="math display">\[Recall= \frac{True \; Negatives}{Actual \; Negatives}\]</span></p></li>
</ul>
<section id="logistic-regression" class="level2">
<h2 class="anchored" data-anchor-id="logistic-regression"><strong><em>Logistic regression</em></strong></h2>
<p>This is one of generalized linear models which deals with binary data. There is a generalization of this model which is called multinomial regression where you can fit multi class data. The equation for logistic regression model is:</p>
<p><span class="math display">\[log(\frac{p}{1-p}) = \beta_0 + \beta_1*X_1 + ... \beta_n * X_n\]</span> and using mle the cost function can be derived as: <span class="math display">\[J(\theta) = -\frac{1}{m}\sum_{i=1}^{m} y^i log(h_\theta(x^i)) + (1-y^i) log(1 - h_\theta(x^i))\]</span> Given that <span class="math display">\[y = 0\]</span> <span class="math display">\[y = 1\]</span> . Finding <span class="math display">\[\beta\]</span> s we minimizing the cost function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fit_glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(label <span class="sc">~</span>., <span class="at">data =</span> train, <span class="at">family =</span> binomial)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
</div>
</section>
<section id="regularization-in-logistic-regression" class="level2">
<h2 class="anchored" data-anchor-id="regularization-in-logistic-regression"><strong><em>Regularization in logistic regression</em></strong></h2>
<p>The warning “glm.fit: fitted probabilities numerically 0 or 1 occurred” shows that there is a perfect separation/over fitting. In this case you can load glmnet library and fit a regularized logistic regression. These can be achieved by adding a regularization term to the cost function.The L1 regularization(Lasso) adds a penalty equal to the sum of the absolute values of the coefficients.</p>
<p><span class="math display">\[J(\theta) = -\frac{1}{m}\sum_{i=0}^{m} y^i log(h_\theta(x^i)) + (1-y^i) log(1 - h_\theta(x^i)) + \frac {\lambda}{2m}\sum_{j=1}^{n} |\theta^i|\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>trainx <span class="ot">&lt;-</span> train[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>y_train <span class="ot">&lt;-</span> <span class="fu">factor</span>(train<span class="sc">$</span>label, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"B"</span>, <span class="st">"M"</span>), <span class="at">labels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#y &lt;- as.numeric(as.character(y))</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>y_test <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>label, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"B"</span>, <span class="st">"M"</span>), <span class="at">labels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">as.character</span>() <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#ytest &lt;- as.numeric(as.character(ytest))</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>testx <span class="ot">&lt;-</span> <span class="fu">data.matrix</span>(test[, <span class="sc">-</span><span class="dv">1</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To find the optimal values <span class="math inline">\(\lambda\)</span> we use cross validation. We choose <span class="math inline">\(\lambda\)</span> which gives the highest cross validation accuracy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>cv_fold <span class="ot">&lt;-</span> <span class="fu">createFolds</span>(train<span class="sc">$</span>label, <span class="at">k =</span> <span class="dv">10</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>myControl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"cv"</span>, </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">summaryFunction =</span> twoClassSummary,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">savePredictions =</span> <span class="st">"all"</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">classProbs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">verboseIter =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">index =</span> cv_fold,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">allowParallel =</span> <span class="cn">TRUE</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>tuneGrid <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">lambda =</span> <span class="fu">seq</span>(<span class="fl">0.001</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">10</span>))</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>glmnet_model <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  label <span class="sc">~</span>.,</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train,</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"glmnet"</span>,</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">"ROC"</span>,</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> myControl,</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">tuneGrid =</span> tuneGrid</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>s</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(glmnet_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#lamda_min &lt;- cv_glm$lambda.min</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>resample_glmnet <span class="ot">&lt;-</span> <span class="fu">thresholder</span>(glmnet_model, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">threshold =</span> <span class="fu">seq</span>(.<span class="dv">2</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">final =</span> <span class="cn">TRUE</span>, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">statistics =</span> <span class="st">"all"</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resample_glmnet , <span class="fu">aes</span>(<span class="at">x =</span> prob_threshold, <span class="at">y =</span> F1)) <span class="sc">+</span> </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Sensitivity), <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caTools)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>pred_glm <span class="ot">&lt;-</span> <span class="fu">predict</span>(glmnet_model, test, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colAUC</span>(pred_glm , test<span class="sc">$</span>label, <span class="at">plotROC =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>             M      B
M vs. B 0.9683 0.9683</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pred_glm1 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pred_glm[, <span class="st">"M"</span>] <span class="sc">&gt;</span> <span class="fl">0.4</span>, <span class="st">"M"</span>, <span class="st">"B"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">#pred_glm1 &lt;- predict(glmnet_model, test, type = "raw")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pred_glm1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(pred_glm1, <span class="at">levels =</span> <span class="fu">levels</span>(test<span class="sc">$</span>label))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(pred_glm1, test<span class="sc">$</span>label,<span class="at">positive =</span> <span class="st">"M"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   M   B
         M  53   7
         B   7 104
                                        
               Accuracy : 0.918         
                 95% CI : (0.866, 0.955)
    No Information Rate : 0.649         
    P-Value [Acc &gt; NIR] : &lt;2e-16        
                                        
                  Kappa : 0.82          
                                        
 Mcnemar's Test P-Value : 1             
                                        
            Sensitivity : 0.883         
            Specificity : 0.937         
         Pos Pred Value : 0.883         
         Neg Pred Value : 0.937         
             Prevalence : 0.351         
         Detection Rate : 0.310         
   Detection Prevalence : 0.351         
      Balanced Accuracy : 0.910         
                                        
       'Positive' Class : M             
                                        </code></pre>
</div>
</div>
</section>
<section id="svm" class="level2">
<h2 class="anchored" data-anchor-id="svm"><strong><em>SVM</em></strong></h2>
<p>Support Vector Machines is a type of supervised learning algorithm that is used for classification and regression. Most of the times however, it’s used for classification.</p>
<p>To understand how SVM works consider the following example of linearly separable data. It’s clear that we can separate the two classes using a straight line(decision boundary). Which is normally referred to a separating hyperplane.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The question is, since there exists many lines that can separate the red and the black classes which is the best one. This introduces us to the maximal margin classification, In short SVM finds the hyperplane/line that gives the biggest margin/gap between the two classes. In this case SVM will choose the solid line as the hyperplane while the margins are the dotted lines. The circled points that lie directly on the margin, or on the wrong side of the margin for their class, are known as support vectors. This shows that SVM uses this points to come up with a the decision boundary, the other points are not used. In this case since it’s a two dimensional space the equation of the separating line will be <span class="math display">\[\beta_0 + \beta_1X_1 + \beta_2X_2\]</span>. Then when equations evaluates to more than 0 then 1 is predicted <span class="math display">\[\beta_0 + \beta_1X_1 + \beta_2X_2 &gt; 0, y = 1\]</span> and when it evaluates to less than zero then predicted class is -1 <span class="math display">\[\beta_0 + \beta_1X_1 + \beta_2X_2 &lt; 0, \; y = -1\]</span> This becomes maximisation problem <span class="math display">\[width \; of \;the \; margin = M \]</span> <span class="math display">\[\sum_{j=1}^{n}\beta_j = 1\]</span></p>
<p><span class="math display">\[y_i(\beta_0 + \beta_1X_1 + \beta_2X_2) &gt;= M\]</span></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is a best case scenario but in most cases the classes are noisy. Consider the plot below no matter which line you choose some points are bound to be on the wrong side of the desicion boundary. Thus maximal margin classification would not work.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>SVM then introduces what is called a soft margin. In naive explanation you can think of this as a margin that allows some points to be on the wrong side. By introducing an error term we allow for some slack. Thus in a two case the maximisation becomes <span class="math display">\[y_i(\beta_0 + \beta_1X_1 + \beta_2X_2) &gt;= M(1- \epsilon)\]</span></p>
<p><span class="math display">\[\sum_{i=0}^{n} \epsilon_i &lt;= C\]</span> C is a tuning parameter which determines the width of the margin while <span class="math display">\[\epsilon_i  \;'s\]</span> are slack variables. that allow individual observations to fall on the wrong side of the margin. In some cases the decision boundary maybe non linear. In case your are dealing with logistic regression you will be forced to introduce polynomial terms which might result in a very large feature space. SVM then introduces what are called kernels</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="tuning-svm" class="level2">
<h2 class="anchored" data-anchor-id="tuning-svm"><strong><em>Tuning SVM</em></strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>svm_tune <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">C =</span><span class="fu">c</span>(<span class="dv">1</span> ,<span class="dv">5</span> ,  <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">150</span>),</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sigma =</span> <span class="fu">seq</span>(<span class="dv">0</span>, .<span class="dv">01</span>, <span class="at">length.out =</span> <span class="dv">5</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>svm_model <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  label <span class="sc">~</span>.,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">metric=</span><span class="st">"ROC"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"svmRadial"</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> myControl,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">tuneGrid =</span> svm_tune,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>resample_svm <span class="ot">&lt;-</span> <span class="fu">thresholder</span>(svm_model, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">threshold =</span> <span class="fu">seq</span>(.<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">final =</span> <span class="cn">TRUE</span>, </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">statistics =</span> <span class="st">"all"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resample_svm , <span class="fu">aes</span>(<span class="at">x =</span> prob_threshold, <span class="at">y =</span> F1, <span class="at">col =</span> <span class="st">"F1"</span>)) <span class="sc">+</span> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Sensitivity,  <span class="at">col =</span> <span class="st">"Sensitivity"</span>))<span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#mean(pred_svm == ytest)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>pred_svm <span class="ot">&lt;-</span><span class="fu">predict</span>(svm_model, <span class="at">newdata =</span> test, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>pred_svm <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pred_svm[, <span class="st">"M"</span>] <span class="sc">&gt;</span> <span class="fl">0.40</span>, <span class="st">"M"</span>, <span class="st">"B"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>pred_svm <span class="ot">&lt;-</span> <span class="fu">factor</span>(pred_svm, <span class="at">levels =</span> <span class="fu">levels</span>(test<span class="sc">$</span>label))</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(test<span class="sc">$</span>label, pred_svm, <span class="at">positive =</span> <span class="st">"M"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   M   B
         M  58   2
         B   2 109
                                        
               Accuracy : 0.977         
                 95% CI : (0.941, 0.994)
    No Information Rate : 0.649         
    P-Value [Acc &gt; NIR] : &lt;2e-16        
                                        
                  Kappa : 0.949         
                                        
 Mcnemar's Test P-Value : 1             
                                        
            Sensitivity : 0.967         
            Specificity : 0.982         
         Pos Pred Value : 0.967         
         Neg Pred Value : 0.982         
             Prevalence : 0.351         
         Detection Rate : 0.339         
   Detection Prevalence : 0.351         
      Balanced Accuracy : 0.974         
                                        
       'Positive' Class : M             
                                        </code></pre>
</div>
</div>
</section>
<section id="xgboost" class="level2">
<h2 class="anchored" data-anchor-id="xgboost"><strong><em>Xgboost</em></strong></h2>
<p>XGBoost is a type of an ensemble learner. Ensemble learning is where multiple machine learning algorithms are used at the same time for prediction. A good example will be Random Forests. In random Forest multiple decision trees are used together for prediction. There are two main types of ensemble learners, bagging and boosting. Random forest use the bagging approach. Trees are built from random subsets(rows and columns) of training set and then the final prediction is the weighted sum of all decision trees functions. Boosting methods are similar but in boosting samples are selected sequentially. For instance the first sample is selected and a decision tree is fitted, The model then picks the examples that were hard to learn and using this examples and a few others selected randomly from the training set the second model is fitted, Using the first model and the second model prediction is made, the model is evaluated and hard examples are picked and together with another randomly selected new examples from training set another model is trained. This is the process for boosting algorithms which continues for a specified number of n.</p>
<p>In gradient boosting the first model is fitted to the original training set. Let say your fitting a simple regression model for ease of explanation. Then your first model will be $ y = f(x) + $. When you find that the error is too large one of the things you might try to do is add more features, use another algorithm, tune your algorithm, look for more training data etc. But what if the error is not white noise and it has some relationship with output <span class="math inline">\(y\)</span> . Then we can fit a second model. $ = f_1(x) + _1$. then this process can continue lets say until n times. Then the final model will be</p>
<p>$ n = f*{n}(x) + _{n-1}$.</p>
<p>Then the final step is to add this models together with some weighting criteria $ weights = ’s$ which gives us the final function used for prediction.</p>
<p><span class="math inline">\(y = \alpha * f(x) + \alpha_1 * f_1(x) + \alpha_2 * f_2(x)...+ \alpha_n * f_n + \epsilon\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "subsample" is the fraction of the training samples (randomly selected) that will be used to train each tree.</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "colsample_by_tree" is the fraction of features (randomly selected) that will be used to train each tree.</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "colsample_bylevel" is the fraction of features (randomly selected) that will be used in each node to train each tree.</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#eta learning rate</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>xgb_ctrl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">number =</span> <span class="dv">5</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">summaryFunction =</span> twoClassSummary,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">classProbs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">allowParallel=</span>T,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">index =</span> cv_fold,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">verboseIter =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">savePredictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">search =</span> <span class="st">"grid"</span>)</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>xgb_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">nrounds =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>, <span class="dv">100</span>),</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">eta =</span> <span class="fu">seq</span>(<span class="fl">0.06</span>, .<span class="dv">2</span>, <span class="at">length.out =</span> <span class="dv">3</span>),</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">80</span>),</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>                        <span class="at">gamma =</span> <span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">01</span>, <span class="fl">0.1</span>),</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>                        <span class="at">colsample_bytree =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.7</span>,<span class="fl">0.8</span>),</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min_child_weight =</span> <span class="dv">1</span>,</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>                        <span class="at">subsample =</span>  .<span class="dv">7</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>                        </span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>xgb_model <span class="ot">&lt;-</span><span class="fu">train</span>(label<span class="sc">~</span>.,</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data=</span>train,</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>                 <span class="at">method=</span><span class="st">"xgbTree"</span>,</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trControl=</span> xgb_ctrl,</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>                 <span class="at">tuneGrid=</span>xgb_grid,</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>                 <span class="at">verbosity=</span><span class="dv">0</span>,</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>                 <span class="at">metric=</span><span class="st">"ROC"</span>,</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>                 <span class="at">nthread =</span><span class="dv">4</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Increasing cut of increases the precision. A greater fraction of those who will be predicted that they have cancer will turn out that they have, but the algorithm is likely to have lower recall. If we want to avoid too many cases of people cancer being predicted that they do not have cancer. It will be very bad to tell someone that they do not have cancer but they have. If we lower the probability let say to 0.3 then we want to make sure that even if there is a 30% chance you have cancer then you should be flagged.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>resample_xgb <span class="ot">&lt;-</span> <span class="fu">thresholder</span>(xgb_model, </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">threshold =</span> <span class="fu">seq</span>(.<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.01</span>), </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">final =</span> <span class="cn">TRUE</span>, </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">statistics =</span> <span class="st">"all"</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resample_xgb , <span class="fu">aes</span>(<span class="at">x =</span> prob_threshold, <span class="at">y =</span> F1, <span class="at">col =</span> <span class="st">"F1"</span>)) <span class="sc">+</span> </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> Sensitivity, <span class="at">col =</span> <span class="st">"Sensitivity"</span>))<span class="sc">+</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span>.<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>pred_xgb <span class="ot">&lt;-</span><span class="fu">predict</span>(xgb_model, <span class="at">newdata =</span> test, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>pred_xgb1 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pred_xgb[, <span class="st">"M"</span>] <span class="sc">&gt;</span> <span class="fl">0.4</span>, <span class="st">"M"</span>, <span class="st">"B"</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>pred_xgb1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(pred_xgb1, <span class="at">levels =</span> <span class="fu">levels</span>(test<span class="sc">$</span>label))</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(pred_xgb1,test<span class="sc">$</span>label,  <span class="at">positive =</span> <span class="st">"M"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   M   B
         M  59   2
         B   1 109
                                       
               Accuracy : 0.982        
                 95% CI : (0.95, 0.996)
    No Information Rate : 0.649        
    P-Value [Acc &gt; NIR] : &lt;2e-16       
                                       
                  Kappa : 0.962        
                                       
 Mcnemar's Test P-Value : 1            
                                       
            Sensitivity : 0.983        
            Specificity : 0.982        
         Pos Pred Value : 0.967        
         Neg Pred Value : 0.991        
             Prevalence : 0.351        
         Detection Rate : 0.345        
   Detection Prevalence : 0.357        
      Balanced Accuracy : 0.983        
                                       
       'Positive' Class : M            
                                       </code></pre>
</div>
</div>
</section>
<section id="learning-curves" class="level2">
<h2 class="anchored" data-anchor-id="learning-curves"><strong><em>Learning Curves</em></strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>sets <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">50</span>, <span class="at">to =</span> <span class="fu">nrow</span>(train), <span class="at">by =</span> <span class="dv">50</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>sets[<span class="fu">length</span>(sets)] <span class="ot">&lt;-</span><span class="fu">nrow</span>(train) </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>train.err <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>test.err<span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>tune_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>( <span class="at">nrounds =</span> <span class="dv">50</span>, <span class="at">max_depth =</span> <span class="dv">50</span>, <span class="at">eta =</span> <span class="fl">0.06</span>, <span class="at">gamma =</span> <span class="fl">0.01</span>, </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">colsample_bytree =</span> <span class="fl">0.6</span>, <span class="at">min_child_weight =</span> <span class="dv">1</span>, <span class="at">subsample =</span> <span class="fl">0.7</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(sets)) {</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    traini <span class="ot">=</span> train[<span class="dv">1</span><span class="sc">:</span>sets[i],]</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    fit_svm <span class="ot">&lt;-</span> <span class="fu">train</span>(label <span class="sc">~</span>., <span class="at">data =</span> traini, <span class="at">metric=</span><span class="st">"Accuracy"</span>, <span class="at">method =</span> <span class="st">"svmRadial"</span>,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"none"</span>, <span class="at">summaryFunction =</span> twoClassSummary,</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">classProbs =</span> <span class="cn">TRUE</span>),</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">tuneGrid =</span> <span class="fu">expand_grid</span>( <span class="at">sigma =</span> <span class="fl">0.0075</span>, <span class="at">C =</span> <span class="dv">5</span>),</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fit_svm &lt;-train(label~.,</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              data=traini,</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              method="xgbTree",</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              trControl= xgb_ctrl,</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              tuneGrid= tune_grid ,</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              verbose=T,</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              metric="ROC",</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              nthread =3</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                  </span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># )</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    pred_train <span class="ot">=</span> <span class="fu">predict</span>(fit_svm, <span class="at">newdata =</span> traini, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    pred_train <span class="ot">=</span> <span class="fu">ifelse</span>(pred_train[[<span class="st">"M"</span>]] <span class="sc">&gt;</span> <span class="fl">0.4</span>, <span class="st">"M"</span>, <span class="st">"B"</span>)</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    train.err[i] <span class="ot">=</span><span class="dv">1</span> <span class="sc">-</span>  <span class="fu">mean</span>(pred_train <span class="sc">==</span> traini<span class="sc">$</span>label)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    pred_test <span class="ot">=</span> <span class="fu">predict</span>(fit_svm, <span class="at">newdata =</span> test, <span class="at">type =</span> <span class="st">'prob'</span>)</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    pred_test <span class="ot">=</span> <span class="fu">ifelse</span>(pred_test[, <span class="st">"M"</span>] <span class="sc">&gt;</span> <span class="fl">0.4</span>, <span class="st">"M"</span>, <span class="st">"B"</span>)</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>    test.err[i] <span class="ot">=</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">mean</span>(test<span class="sc">$</span>label <span class="sc">==</span> pred_test)</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(i,<span class="st">" "</span>)</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1  2  3  4  5  6  7  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>train.err</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.00000 0.03000 0.03333 0.01500 0.02000 0.02000 0.02261</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matplot</span>(sets, <span class="fu">cbind</span>(test.err, train.err), <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>),</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">ylab =</span> <span class="st">"Error"</span>, <span class="at">xlab =</span> <span class="st">"Train sample size"</span>, <span class="at">main =</span> <span class="st">"SVM Learning Curves"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Test"</span>, <span class="st">"Train"</span>), <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cancer_data_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="720"></p>
</div>
</div>
</section>
<section id="error-analysis" class="level2">
<h2 class="anchored" data-anchor-id="error-analysis"><strong><em>Error Analysis</em></strong></h2>
<p>Look at the examples that the algorithm misclassified to see if there is a trend. Generally you are trying to find out the weak points of your algorithm. Checking why your algorithm is making those errors. For instance, from the boxplots below the malignant tumors that were misclassified had lower radius mean compared to mislassified benign tumors. This contrary to what we saw in the first boxplots graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(cancer[<span class="sc">-</span>train_sample,], pred_svm) <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setDT</span>()</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>test_mis_svm <span class="ot">&lt;-</span> df[(diagnosis <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> pred_svm <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|</span>( diagnosis <span class="sc">==</span> <span class="st">"B"</span> <span class="sc">&amp;</span> pred_svm <span class="sc">==</span> <span class="st">"M"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test_mis_svm_m &lt;- melt(test_mis_svm, </span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                 id.vars = c("diagnosis", "pred_svm"))</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(test_mis_svm_m , aes(x = pred_svm, y = value))+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     geom_boxplot() + facet_wrap(~variable, scales = "free_y")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>