<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mburu">
<meta name="dcterms.date" content="2020-06-19">

<title>Personal Blog - Network analysis in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../milkyway.jpeg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BFNZ97VTLJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-BFNZ97VTLJ', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<script src="../../site_libs/threejs-111/three.min.js"></script>
<script src="../../site_libs/threejs-111/Detector.js"></script>
<script src="../../site_libs/threejs-111/Projector.js"></script>
<script src="../../site_libs/threejs-111/CanvasRenderer.js"></script>
<script src="../../site_libs/threejs-111/TrackballControls.js"></script>
<script src="../../site_libs/threejs-111/StateOrbitControls.js"></script>
<script src="../../site_libs/scatterplotThree-binding-0.3.3/scatterplotThree.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../../style.css">
<meta property="og:title" content="Personal Blog - Network analysis in R">
<meta property="og:description" content="Here you will learn how to create an igraph ‘object’ from data stored in an edgelist. The data are friendships in a group of students.">
<meta property="og:site-name" content="Personal Blog">
<meta name="twitter:title" content="Personal Blog - Network analysis in R">
<meta name="twitter:description" content="Here you will learn how to create an igraph ‘object’ from data stored in an edgelist. The data are friendships in a group of students.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Personal Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../datacamp.html">
 <span class="menu-text">Data Camp Courses</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/m-mburu"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mmburu_w"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#creating-an-igraph-object" id="toc-creating-an-igraph-object" class="nav-link active" data-scroll-target="#creating-an-igraph-object">Creating an igraph object</a></li>
  <li><a href="#counting-vertices-and-edges" id="toc-counting-vertices-and-edges" class="nav-link" data-scroll-target="#counting-vertices-and-edges">Counting vertices and edges</a></li>
  <li><a href="#node-attributes-and-subsetting" id="toc-node-attributes-and-subsetting" class="nav-link" data-scroll-target="#node-attributes-and-subsetting">Node attributes and subsetting</a></li>
  <li><a href="#edge-attributes-and-subsetting" id="toc-edge-attributes-and-subsetting" class="nav-link" data-scroll-target="#edge-attributes-and-subsetting">Edge attributes and subsetting</a></li>
  <li><a href="#visualizing-attributes" id="toc-visualizing-attributes" class="nav-link" data-scroll-target="#visualizing-attributes">Visualizing attributes</a></li>
  <li><a href="#quiz-on-attributes" id="toc-quiz-on-attributes" class="nav-link" data-scroll-target="#quiz-on-attributes">Quiz on attributes</a></li>
  <li><a href="#igraph-network-layouts" id="toc-igraph-network-layouts" class="nav-link" data-scroll-target="#igraph-network-layouts">Igraph network layouts</a></li>
  <li><a href="#visualizing-edges" id="toc-visualizing-edges" class="nav-link" data-scroll-target="#visualizing-edges">Visualizing edges</a></li>
  <li><a href="#directed-igraph-objects" id="toc-directed-igraph-objects" class="nav-link" data-scroll-target="#directed-igraph-objects">Directed igraph objects</a></li>
  <li><a href="#identifying-edges-for-each-vertex" id="toc-identifying-edges-for-each-vertex" class="nav-link" data-scroll-target="#identifying-edges-for-each-vertex">Identifying edges for each vertex</a>
  <ul>
  <li><a href="#neighbors" id="toc-neighbors" class="nav-link" data-scroll-target="#neighbors">Neighbors</a></li>
  </ul></li>
  <li><a href="#distances-between-vertices" id="toc-distances-between-vertices" class="nav-link" data-scroll-target="#distances-between-vertices">Distances between vertices</a>
  <ul>
  <li><a href="#finding-longest-path-between-two-vertices" id="toc-finding-longest-path-between-two-vertices" class="nav-link" data-scroll-target="#finding-longest-path-between-two-vertices">Finding longest path between two vertices</a></li>
  </ul></li>
  <li><a href="#identifying-key-vertices" id="toc-identifying-key-vertices" class="nav-link" data-scroll-target="#identifying-key-vertices">Identifying key vertices</a></li>
  <li><a href="#betweenness" id="toc-betweenness" class="nav-link" data-scroll-target="#betweenness">Betweenness</a></li>
  <li><a href="#visualizing-important-nodes-and-edges" id="toc-visualizing-important-nodes-and-edges" class="nav-link" data-scroll-target="#visualizing-important-nodes-and-edges">Visualizing important nodes and edges</a></li>
  <li><a href="#forrest-gump-network" id="toc-forrest-gump-network" class="nav-link" data-scroll-target="#forrest-gump-network">Forrest Gump network</a>
  <ul>
  <li><a href="#network-density-and-average-path-length" id="toc-network-density-and-average-path-length" class="nav-link" data-scroll-target="#network-density-and-average-path-length">Network density and average path length</a></li>
  </ul></li>
  <li><a href="#random-graphs" id="toc-random-graphs" class="nav-link" data-scroll-target="#random-graphs">Random graphs</a></li>
  <li><a href="#network-randomizations" id="toc-network-randomizations" class="nav-link" data-scroll-target="#network-randomizations">Network randomizations</a>
  <ul>
  <li><a href="#randomization-quiz" id="toc-randomization-quiz" class="nav-link" data-scroll-target="#randomization-quiz">Randomization quiz</a></li>
  </ul></li>
  <li><a href="#triangles-and-transitivity" id="toc-triangles-and-transitivity" class="nav-link" data-scroll-target="#triangles-and-transitivity">Triangles and transitivity</a></li>
  <li><a href="#transitivity-randomizations" id="toc-transitivity-randomizations" class="nav-link" data-scroll-target="#transitivity-randomizations">Transitivity randomizations</a></li>
  <li><a href="#cliques" id="toc-cliques" class="nav-link" data-scroll-target="#cliques">Cliques</a></li>
  <li><a href="#visualize-largest-cliques" id="toc-visualize-largest-cliques" class="nav-link" data-scroll-target="#visualize-largest-cliques">Visualize largest cliques</a></li>
  <li><a href="#assortativity" id="toc-assortativity" class="nav-link" data-scroll-target="#assortativity">Assortativity</a></li>
  <li><a href="#using-randomizations-to-assess-assortativity" id="toc-using-randomizations-to-assess-assortativity" class="nav-link" data-scroll-target="#using-randomizations-to-assess-assortativity">Using randomizations to assess assortativity</a></li>
  <li><a href="#reciprocity" id="toc-reciprocity" class="nav-link" data-scroll-target="#reciprocity">Reciprocity</a>
  <ul>
  <li><a href="#what-does-assortativity-measure" id="toc-what-does-assortativity-measure" class="nav-link" data-scroll-target="#what-does-assortativity-measure">What does assortativity measure</a></li>
  </ul></li>
  <li><a href="#fast-greedy-community-detection" id="toc-fast-greedy-community-detection" class="nav-link" data-scroll-target="#fast-greedy-community-detection">Fast-greedy community detection</a></li>
  <li><a href="#edge-betweenness-community-detection" id="toc-edge-betweenness-community-detection" class="nav-link" data-scroll-target="#edge-betweenness-community-detection">Edge-betweenness community detection</a></li>
  <li><a href="#interactive-networks-with-threejs" id="toc-interactive-networks-with-threejs" class="nav-link" data-scroll-target="#interactive-networks-with-threejs">Interactive networks with threejs</a></li>
  <li><a href="#sizing-vertices-in-threejs" id="toc-sizing-vertices-in-threejs" class="nav-link" data-scroll-target="#sizing-vertices-in-threejs">Sizing vertices in threejs</a></li>
  <li><a href="#d-community-network-graph" id="toc-d-community-network-graph" class="nav-link" data-scroll-target="#d-community-network-graph">3D community network graph</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Network analysis in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mburu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 19, 2020</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="creating-an-igraph-object" class="level1">
<h1>Creating an igraph object</h1>
<p>Here you will learn how to create an igraph ‘object’ from data stored in an edgelist. The data are friendships in a group of students. You will also learn how to make a basic visualization of the network.</p>
<p>Each row of the friends dataframe represents an edge in the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>friends <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"friends.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the first few rows of the dataframe 'friends'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(friends) <span class="sc">%&gt;%</span> kable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">name1</th>
<th style="text-align: left;">name2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jessie</td>
<td style="text-align: left;">Sidney</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jessie</td>
<td style="text-align: left;">Britt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sidney</td>
<td style="text-align: left;">Britt</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sidney</td>
<td style="text-align: left;">Donnie</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Karl</td>
<td style="text-align: left;">Berry</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sidney</td>
<td style="text-align: left;">Rene</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert friends dataframe to a matrix</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>friends.mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(friends)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert friends matrix to an igraph object</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph.edgelist</span>(friends.mat, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a very basic plot of the network</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="counting-vertices-and-edges" class="level1">
<h1>Counting vertices and edges</h1>
<p>A lot of basic information about a network can be extracted from an igraph object. In this exercise you will learn how to count the vertices and edges from a network by applying several functions to the graph object g. Each row of the friends dataframe represents an edge in the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset vertices and edges</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 16/16 vertices, named, from c97b400:
 [1] Jessie  Sidney  Britt   Donnie  Karl    Berry   Rene    Shayne  Elisha 
[10] Whitney Odell   Lacy    Eugene  Jude    Rickie  Tommy  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 27/27 edges from c97b400 (vertex names):
 [1] Jessie --Sidney  Jessie --Britt   Sidney --Britt   Sidney --Donnie 
 [5] Karl   --Berry   Sidney --Rene    Britt  --Rene    Sidney --Shayne 
 [9] Sidney --Elisha  Sidney --Whitney Jessie --Whitney Donnie --Odell  
[13] Sidney --Odell   Rene   --Whitney Donnie --Shayne  Jessie --Lacy   
[17] Rene   --Lacy    Elisha --Eugene  Eugene --Jude    Berry  --Odell  
[21] Odell  --Rickie  Karl   --Odell   Britt  --Lacy    Elisha --Jude   
[25] Whitney--Lacy    Britt  --Whitney Karl   --Tommy  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of edges</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsize</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of vertices</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gorder</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
</section>
<section id="node-attributes-and-subsetting" class="level1">
<h1>Node attributes and subsetting</h1>
<p>In this exercise you will learn how to add attributes to vertices in the network and view them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>genders <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"18"</span>, <span class="st">"19"</span>, <span class="st">"21"</span>, <span class="st">"20"</span>, <span class="st">"22"</span>, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"18"</span>, <span class="st">"23"</span>, <span class="st">"21"</span>, <span class="st">"22"</span>, <span class="st">"20"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">"20"</span>, <span class="st">"22"</span>, <span class="st">"21"</span>, <span class="st">"18"</span>, <span class="st">"19"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"20"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the objects 'genders' and 'ages'</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a> genders</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "M" "F" "F" "M" "M" "M" "F" "M" "M" "F" "M" "F" "M" "F" "M" "M"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ages</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 18 19 21 20 22 18 23 21 22 20 20 22 21 18 19 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new vertex attribute called 'gender'</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">set_vertex_attr</span>(g, <span class="st">"gender"</span>, <span class="at">value =</span> genders)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new vertex attribute called 'age'</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">set_vertex_attr</span>(g, <span class="st">"age"</span>, <span class="at">value =</span> ages)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View all vertex attributes in a list</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">vertex_attr</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$name
 [1] "Jessie"  "Sidney"  "Britt"   "Donnie"  "Karl"    "Berry"   "Rene"   
 [8] "Shayne"  "Elisha"  "Whitney" "Odell"   "Lacy"    "Eugene"  "Jude"   
[15] "Rickie"  "Tommy"  

$gender
 [1] "M" "F" "F" "M" "M" "M" "F" "M" "M" "F" "M" "F" "M" "F" "M" "M"

$age
 [1] 18 19 21 20 22 18 23 21 22 20 20 22 21 18 19 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View attributes of first five vertices in a dataframe</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(g)[[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 5/16 vertices, named, from c97b400:
    name gender age
1 Jessie      M  18
2 Sidney      F  19
3  Britt      F  21
4 Donnie      M  20
5   Karl      M  22</code></pre>
</div>
</div>
</section>
<section id="edge-attributes-and-subsetting" class="level1">
<h1>Edge attributes and subsetting</h1>
<p>In this exercise you will learn how to add attributes to edges in the network and view them. For instance, we will add the attribute ‘hours’ that represents how many hours per week each pair of friends spend with each other.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>hours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"5"</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"5"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"3"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"5"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"4"</span>, <span class="st">"1"</span>, <span class="st">"3"</span>, <span class="st">"1"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"1"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View hours</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>hours</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 2 1 2 5 5 1 1 3 2 1 1 5 1 2 4 1 3 1 1 1 4 1 3 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new edge attribute called 'hours'</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">set_edge_attr</span>(g, <span class="st">"hours"</span>, <span class="at">value =</span> hours)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View edge attributes of graph object</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">edge_attr</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$hours
 [1] 1 2 2 1 2 5 5 1 1 3 2 1 1 5 1 2 4 1 3 1 1 1 4 1 3 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all edges that include "Britt"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(g)[[<span class="fu">inc</span>(<span class="st">'Britt'</span>)]]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 5/27 edges from c97b400 (vertex names):
     tail    head tid hid hours
2  Jessie   Britt   1   3     2
3  Sidney   Britt   2   3     2
7   Britt    Rene   3   7     5
23  Britt    Lacy   3  12     4
26  Britt Whitney   3  10     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all pairs that spend 4 or more hours together per week</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(g)[[hours<span class="sc">&gt;=</span> <span class="dv">4</span>]]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 6/27 edges from c97b400 (vertex names):
     tail    head tid hid hours
6  Sidney    Rene   2   7     5
7   Britt    Rene   3   7     5
14   Rene Whitney   7  10     5
17   Rene    Lacy   7  12     4
23  Britt    Lacy   3  12     4
27   Karl   Tommy   5  16     4</code></pre>
</div>
</div>
</section>
<section id="visualizing-attributes" class="level1">
<h1>Visualizing attributes</h1>
<p>In this exercise we will learn how to create igraph objects with attributes directly from dataframes and how to visualize attributes in plots. We will use a second network of friendship connections between students.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>friends1_edges <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"friends1_edges.csv"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>friends1_nodes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"friends1_nodes.csv"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an igraph object with attributes directly from dataframes</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d =</span> friends1_edges, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">vertices =</span> friends1_nodes, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset edges greater than or equal to 5 hours</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(g1)[[hours<span class="sc">&gt;=</span><span class="dv">5</span>]]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 4/25 edges from 611175d (vertex names):
        tail      head tid hid hours
5     Kelley Valentine   3   6     5
8     Ronald   Jasmine   4   8     5
12 Valentine     Perry   6  15     5
15   Jasmine      Juan   8   9     6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set vertex color by gender</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(g1)<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(g1)<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"F"</span>, <span class="st">"orange"</span>, <span class="st">"dodgerblue"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="quiz-on-attributes" class="level1">
<h1>Quiz on attributes</h1>
<ul>
<li>What term is typically used to describe the relative strength of edges?</li>
<li>weight</li>
</ul>
</section>
<section id="igraph-network-layouts" class="level1">
<h1>Igraph network layouts</h1>
<p>The igraph package provides several built in layout algorithms for network visualization. Depending upon the size of a given network different layouts may be more effective in communicating the structure of the network. Ideally the best layout is the one that minimizes the number of edges that cross each other in the network. In this exercise you will explore just a few of the many default layout algorithms. Re-executing the code for each plot will lead to a slightly different version of the same layout type. Doing this a few times can help to find the best looking visualization for your network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph object g1 in a circle layout</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">layout =</span> <span class="fu">layout_in_circle</span>(g1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph object g1 in a Fruchterman-Reingold layout </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">layout =</span> <span class="fu">layout_with_fr</span>(g1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph object g1 in a Tree layout </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">layout_as_tree</span>(g1)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">layout =</span> m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph object g1 using igraph's chosen layout </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">layout_nicely</span>(g1)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">layout =</span> m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-7-4.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="visualizing-edges" class="level1">
<h1>Visualizing edges</h1>
<p>In this exercise you will learn how to change the size of edges in a network based on their weight, as well as how to remove edges from a network which can sometimes be helpful in more effectively visualizing large and highly clustered networks. In this introductory chapter, we have just scratched the surface of what’s possible in visualizing igraph networks. You will continue to develop these skills in future chapters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of weights based on the number of hours each pair spend together</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>w1 <span class="ot">&lt;-</span> <span class="fu">E</span>(g1)<span class="sc">$</span>hours</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the network varying edges by weights</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">layout_nicely</span>(g1)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1, </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">edge.color =</span> <span class="st">'black'</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">edge.width =</span> w1,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">layout =</span> m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new igraph object by deleting edges that are less than 2 hours long </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">delete_edges</span>(g1, <span class="fu">E</span>(g1)[hours <span class="sc">&lt;</span> <span class="dv">2</span>])</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the new graph </span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>w2 <span class="ot">&lt;-</span> <span class="fu">E</span>(g2)<span class="sc">$</span>hours</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">layout_nicely</span>(g2)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g2, </span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'black'</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.width =</span> w2,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="directed-igraph-objects" class="level1">
<h1>Directed igraph objects</h1>
<p>In this exercise you will learn how to create a directed graph from a dataframe, how to inspect whether a graph object is directed and/or weighted and how to extract those vertices at the beginning and end of directed edges.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>measles <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"measles.csv"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the graph object</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(measles, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># is the graph directed?</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.directed</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the graph weighted?</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.weighted</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Where does each edge originate from?</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">head_of</span>(g, <span class="fu">E</span>(g)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  17  18  19  20  21 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
 22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
 42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  61  62  63 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
 64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
 84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102 103 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 
  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 
184 185 186 187 
  1   1   1   1 </code></pre>
</div>
</div>
</section>
<section id="identifying-edges-for-each-vertex" class="level1">
<h1>Identifying edges for each vertex</h1>
<p>In this exercise you will learn how to identify particular edges. You will learn how to determine if an edge exists between two vertices as well as finding all vertices connected in either direction to a given vertex.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a basic plot</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'gray77'</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">0</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> <span class="fl">0.1</span>,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> <span class="fu">layout_nicely</span>(g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is there an edge going from vertex 184 to vertex 178?</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>g[<span class="st">'184'</span>, <span class="st">'178'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is there an edge going from vertex 178 to vertex 184?</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>g[<span class="st">'178'</span>, <span class="st">'184'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all edges going to or from vertex 184</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">incident</span>(g, <span class="st">'184'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"all"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 6/184 edges from c7e1d35 (vertex names):
[1] 184-&gt;45  184-&gt;182 184-&gt;181 184-&gt;178 184-&gt;183 184-&gt;177</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all edges going out from vertex 184</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">incident</span>(g, <span class="st">'184'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"out"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 6/184 edges from c7e1d35 (vertex names):
[1] 184-&gt;45  184-&gt;182 184-&gt;181 184-&gt;178 184-&gt;183 184-&gt;177</code></pre>
</div>
</div>
<section id="neighbors" class="level2">
<h2 class="anchored" data-anchor-id="neighbors">Neighbors</h2>
<p>Often in network analysis it is important to explore the patterning of connections that exist between vertices. One way is to identify neighboring vertices of each vertex. You can then determine which neighboring vertices are shared even by unconnected vertices indicating how two vertices may have an indirect relationship through others. In this exercise you will learn how to identify neighbors and shared neighbors between pairs of vertices.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify all neighbors of vertex 12 regardless of direction</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">neighbors</span>(g, <span class="st">'12'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'all'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 5/187 vertices, named, from c7e1d35:
[1] 45  13  72  89  109</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify other vertices that direct edges towards vertex 12</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">neighbors</span>(g, <span class="st">'12'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'in'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 1/187 vertex, named, from c7e1d35:
[1] 45</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify any vertices that receive an edge from vertex 42 and direct an edge to vertex 124</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>n1 <span class="ot">&lt;-</span><span class="fu">neighbors</span>(g, <span class="st">'42'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'out'</span>))</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>n2 <span class="ot">&lt;-</span> <span class="fu">neighbors</span>(g, <span class="st">'124'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'in'</span>))</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">intersection</span>(n1, n2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 1/187 vertex, named, from c7e1d35:
[1] 7</code></pre>
</div>
</div>
</section>
</section>
<section id="distances-between-vertices" class="level1">
<h1>Distances between vertices</h1>
<p>The inter-connectivity of a network can be assessed by examining the number and length of paths between vertices. A path is simply the chain of connections between vertices. The number of intervening edges between two vertices represents the geodesic distance between vertices. Vertices that are connected to each other have a geodesic distance of 1. Those that share a neighbor in common but are not connected to each other have a geodesic distance of 2 and so on. In directed networks, the direction of edges can be taken into account. If two vertices cannot be reached via following directed edges they are given a geodesic distance of infinity. In this exercise you will learn how to find the longest paths between vertices in a network and how to discern those vertices that are within n connections of a given vertex. For disease transmission networks such as the measles dataset this helps you to identify how quickly the disease spreads through the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Which two vertices are the furthest apart in the graph ?</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">farthest_vertices</span>(g) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$vertices
+ 2/187 vertices, named, from c7e1d35:
[1] 184 162

$distance
[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shows the path sequence between two furthest apart vertices.</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_diameter</span>(g)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 6/187 vertices, named, from c7e1d35:
[1] 184 178 42  7   123 162</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify vertices that are reachable within two connections from vertex 42</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ego</span>(g, <span class="dv">2</span>, <span class="st">'42'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'out'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
+ 13/187 vertices, named, from c7e1d35:
 [1] 42  7   106 43  123 101 120 124 125 128 129 108 127</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify vertices that can reach vertex 42 within two connections</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ego</span>(g, <span class="dv">2</span>, <span class="st">'42'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">'in'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
+ 3/187 vertices, named, from c7e1d35:
[1] 42  178 184</code></pre>
</div>
</div>
<section id="finding-longest-path-between-two-vertices" class="level2">
<h2 class="anchored" data-anchor-id="finding-longest-path-between-two-vertices">Finding longest path between two vertices</h2>
<ul>
<li>What is the longest possible path in a network referred to as?</li>
<li>Diameter</li>
</ul>
</section>
</section>
<section id="identifying-key-vertices" class="level1">
<h1>Identifying key vertices</h1>
<p>Perhaps the most straightforward measure of vertex importance is the degree of a vertex. The out-degree of a vertex is the number of other individuals to which a vertex has an outgoing edge directed to. The in-degree is the number of edges received from other individuals. In the measles network, individuals that infect many other individuals will have a high out-degree. In this exercise you will identify whether individuals infect equivalent amount of other children or if there are key children who have high out-degrees and infect many other children.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the out-degree of each vertex</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>g.outd <span class="ot">&lt;-</span> <span class="fu">degree</span>(g, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"out"</span>))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View a summary of out-degree</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(g.outd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>g.outd
  0   1   2   3   4   6   7   8  30 
125  21  16  12   6   2   3   1   1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a histogram of out-degrees</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(g.outd, <span class="at">breaks =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the vertex that has the maximum out-degree</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which.max</span>(g.outd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>45 
 1 </code></pre>
</div>
</div>
</section>
<section id="betweenness" class="level1">
<h1>Betweenness</h1>
<p>Another measure of the importance of a given vertex is its betweenness. This is an index of how frequently the vertex lies on shortest paths between any two vertices in the network. It can be thought of as how critical the vertex is to the flow of information through a network. Individuals with high betweenness are key bridges between different parts of a network. In our measles transmission network, vertices with high betweenness are those children who were central to passing on the disease to other parts of the network. In this exercise, you will identify the betweenness score for each vertex and then make a new plot of the network adjusting the vertex size by its betweenness score to highlight these key vertices.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate betweenness of each vertex</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>g.b <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(g, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show histogram of vertex betweenness</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(g.b, <span class="at">breaks =</span> <span class="dv">80</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot with vertex size determined by betweenness score</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g, </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'black'</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="fu">sqrt</span>(g.b)<span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> <span class="fl">0.05</span>,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> <span class="fu">layout_nicely</span>(g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="visualizing-important-nodes-and-edges" class="level1">
<h1>Visualizing important nodes and edges</h1>
<p>One issue with the measles dataset is that there are three individuals for whom no information is known about who infected them. One of these individuals (vertex 184) appears ultimately responsible for spreading the disease to many other individuals even though they did not directly infect too many individuals. However, because vertex 184 has no incoming edge in the network they appear to have low betweenness. One way to explore the importance of this vertex is by visualizing the geodesic distances of connections going out from this individual. In this exercise you shall create a plot of these distances from this patient zero.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make an ego graph</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>g184 <span class="ot">&lt;-</span> <span class="fu">make_ego_graph</span>(g, <span class="fu">diameter</span>(g), <span class="at">nodes =</span> <span class="st">'184'</span>, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"all"</span>))[[<span class="dv">1</span>]]</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a vector of geodesic distances of all vertices from vertex 184 </span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>dists <span class="ot">&lt;-</span> <span class="fu">distances</span>(g184, <span class="st">"184"</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a color palette of length equal to the maximal geodesic distance plus one.</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"orange"</span>, <span class="st">"blue"</span>, <span class="st">"dodgerblue"</span>, <span class="st">"cyan"</span>)</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set color attribute to vertices of network g184.</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(g184)<span class="sc">$</span>color <span class="ot">&lt;-</span> colors[dists<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the network based on geodesic distance from vertex 184 (patient zero).</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g184, </span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label =</span> dists, </span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">"white"</span>,</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex =</span> .<span class="dv">6</span>,</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'black'</span>,</span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">7</span>,</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> .<span class="dv">05</span>,</span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Geodesic Distances from Patient Zero"</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li><p>Which measure of a vertex importance is determined by how often that vertex lies on the shortest path between any two vertices in a network?</p></li>
<li><p>Betweenness</p></li>
</ul>
</section>
<section id="forrest-gump-network" class="level1">
<h1>Forrest Gump network</h1>
<p>In this chapter you will use a social network based on the movie Forrest Gump. Each edge of the network indicates that those two characters were in at least one scene of the movie together. Therefore this network is undirected. To familiarize yourself with the network, you will first create the network object from the raw dataset. Then, you will identify key vertices using a measure called eigenvector centrality. Individuals with high eigenvector centrality are those that are highly connected to other highly connected individuals. You will then make an exploratory visualization of the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>gump <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"gump.csv"</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(gump, <span class="fu">c</span>(<span class="st">"V1"</span>, <span class="st">"V2"</span>),  <span class="fu">c</span>(<span class="st">"to"</span>, <span class="st">"from"</span>))</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect Forrest Gump Movie dataset</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gump) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">to</th>
<th style="text-align: left;">from</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ABBIE HOFFMAN</td>
<td style="text-align: left;">JENNY</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABBIE HOFFMAN</td>
<td style="text-align: left;">POLICEMAN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ANCHORMAN</td>
<td style="text-align: left;">FORREST</td>
</tr>
<tr class="even">
<td style="text-align: left;">ANCHORMAN</td>
<td style="text-align: left;">LT DAN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ANCHORMAN</td>
<td style="text-align: left;">MARGO</td>
</tr>
<tr class="even">
<td style="text-align: left;">ANCHORMAN</td>
<td style="text-align: left;">MRS GUMP</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make an undirected network</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(gump, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify key nodes using eigenvector centrality</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>g.ec <span class="ot">&lt;-</span> <span class="fu">eigen_centrality</span>(g)</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="fu">which.max</span>(g.ec<span class="sc">$</span>vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FORREST 
     36 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Forrest Gump Network</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g,</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="at">vertex.label.cex =</span> <span class="fl">0.6</span>,</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="at">vertex.size =</span> <span class="dv">25</span><span class="sc">*</span>(g.ec<span class="sc">$</span>vector),</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="at">edge.color =</span> <span class="st">'gray88'</span>,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="at">main =</span> <span class="st">"Forrest Gump Network"</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/Forrest Gump network-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<section id="network-density-and-average-path-length" class="level2">
<h2 class="anchored" data-anchor-id="network-density-and-average-path-length">Network density and average path length</h2>
<p>The first graph level metric you will explore is the density of a graph. This is essentially the proportion of all potential edges between vertices that actually exist in the network graph. It is an indicator of how well connected the vertices of the graph are.</p>
<p>Another measure of how interconnected a network is average path length. This is calculated by determining the mean of the lengths of the shortest paths between all pairs of vertices in the network. The longest path length between any pair of vertices is called the diameter of the network graph. You will calculate the diameter and average path length of the original graph g.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get density of a graph</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>gd <span class="ot">&lt;-</span> <span class="fu">edge_density</span>(g)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the diameter of the graph g</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">diameter</span>(g, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the average path length of the graph g</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>g.apl <span class="ot">&lt;-</span> <span class="fu">mean_distance</span>(g, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>g.apl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.994967</code></pre>
</div>
</div>
<ul>
<li><p>If a graph has 7 vertices there are 21 possible edges in the network. If 14 edges exist, what is the density of the network?</p></li>
<li><p>0.67</p></li>
</ul>
</section>
</section>
<section id="random-graphs" class="level1">
<h1>Random graphs</h1>
<p>Generating random graphs is an important method for investigating how likely or unlikely other network metrics are likely to occur given certain properties of the original graph. The simplest random graph is one that has the same number of vertices as your original graph and approximately the same density as the original graph. Here you will create one random graph that is based on the original Forrest Gump Network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create one random graph with the same number of nodes and edges as g</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>g.random <span class="ot">&lt;-</span> <span class="fu">erdos.renyi.game</span>(<span class="at">n =</span> <span class="fu">gorder</span>(g), <span class="at">p.or.m =</span> gd, <span class="at">type =</span> <span class="st">"gnp"</span>)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>g.random</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 7583738 U--- 94 270 -- Erdos-Renyi (gnp) graph
+ attr: name (g/c), type (g/c), loops (g/l), p (g/n)
+ edges from 7583738:
 [1]  2-- 4  1-- 9  7-- 9  5--10  6--11  5--12  1--13 11--15 11--16 14--17
[11] 15--18  8--19 15--20 14--21  6--23 16--23  8--24  5--25  5--28 14--28
[21] 27--28 16--29 17--30  5--31 13--31 17--31 19--31 28--31 31--33 12--34
[31] 24--34 28--34 32--34 11--35 31--35  8--36 23--36 11--38 30--38  3--39
[41]  6--39 12--39 12--40 13--40 16--40 30--40 36--40 10--41 20--41 37--41
[51] 23--43 26--43 27--43  5--44 12--44 21--44 26--44 20--45  7--46 10--46
[61] 24--46 42--46 10--47 12--47 31--47 42--47  2--48 17--48 31--48 40--48
[71] 12--49 17--49 23--49 30--49 16--50 27--51 28--51 30--51 32--52 37--52
+ ... omitted several edges</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g.random)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="1440"></p>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get density of new random graph `g.random`</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">edge_density</span>(g.random)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.06177076</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Get the average path length of the random graph g.random</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean_distance</span>(g.random, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.743537</code></pre>
</div>
</div>
</section>
<section id="network-randomizations" class="level1">
<h1>Network randomizations</h1>
<p>In the previous exercise you may have noticed that the average path length of the Forrest Gump network was smaller than the average path length of the random network. If you ran the code a few times you will have noticed that it is nearly always lower in the Forrest Gump network than the random network. What this suggests is that the Forrest Gump network is more highly interconnected than each random network even though the random networks have the same number of vertices and approximately identical graph densities. Rather than re-running this code many times, you can more formally address this by creating 1000 random graphs based on the number of vertices and density of the original Forrest Gump graph. Then, you can see how many times the average path length of the random graphs is less than the original Forrest Gump network. This is called a randomization test.</p>
<p>The graph g, and its average path length (that you calculated in the previous exercise), g.apl are in your workspace.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 1000 random graphs</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>gl <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">'list'</span>, <span class="dv">1000</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  gl[[i]] <span class="ot">&lt;-</span> <span class="fu">erdos.renyi.game</span>(<span class="at">n =</span> <span class="fu">gorder</span>(g), <span class="at">p.or.m =</span> gd, <span class="at">type =</span> <span class="st">"gnp"</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average path length of 1000 random graphs</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>gl.apls <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(gl, mean_distance, <span class="at">directed =</span> <span class="cn">FALSE</span>))</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of average path lengths</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(gl.apls, <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(<span class="fl">1.5</span>, <span class="dv">6</span>)))</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(gl.apls), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of graphs with an average path length lower than our observed</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(gl.apls  <span class="sc">&lt;</span> g.apl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<section id="randomization-quiz" class="level2">
<h2 class="anchored" data-anchor-id="randomization-quiz">Randomization quiz</h2>
<ul>
<li>Randomization tests enable you to identify:</li>
<li>Whether features of your original network are particularly unusual.</li>
</ul>
</section>
</section>
<section id="triangles-and-transitivity" class="level1">
<h1>Triangles and transitivity</h1>
<p>Another important measure of local connectivity in a network graph involves investigating triangles (also known as triads). In this exercise you will find all closed triangles that exist in a network. This means that an edge exists between three given vertices. You can then calculate the transitivity of the network. This is equivalent to the proportion of all possible triangles in the network that are closed. You will also learn how to identify the number of closed triangles that any given vertex is a part of and its local transitivity - that is, the proportion of closed triangles that the vertex is a part of given the theoretical number of triangles it could be a part of.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all triangles in the network.</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co">#matrix(triangles(g), nrow = 3)</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of triangles that vertex "BUBBA" is in.</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">count_triangles</span>(g, <span class="at">vids=</span><span class="st">'BUBBA'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate  the global transitivity of the network.</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>g.tr <span class="ot">&lt;-</span> <span class="fu">transitivity</span>(g)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>g.tr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1918082</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the local transitivity for vertex BUBBA.</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(g, <span class="at">vids=</span><span class="st">'BUBBA'</span>, <span class="at">type =</span> <span class="st">"local"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6727273</code></pre>
</div>
</div>
</section>
<section id="transitivity-randomizations" class="level1">
<h1>Transitivity randomizations</h1>
<p>As you did for the average path length, let’s investigate if the global transitivity of the Forrest Gump network is significantly higher than we would expect by chance for random networks of the same size and density. You can compare Forrest Gump’s global transitivity to 1000 other random networks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average transitivity of 1000 random graphs</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>gl.tr <span class="ot">&lt;-</span> <span class="fu">lapply</span>(gl, transitivity)</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>gl.trs <span class="ot">&lt;-</span> <span class="fu">unlist</span>(gl.tr)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get summary statistics of transitivity scores</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gl.trs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.03068 0.05361 0.06125 0.06103 0.06795 0.10115 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of graphs with a transitivity score higher than Forrest Gump's network</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(gl.trs <span class="sc">&gt;</span> g.tr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="cliques" class="level1">
<h1>Cliques</h1>
<p>Identifying cliques is a common practice in undirected networks. In a clique every two unique nodes are adjacent - that means that every individual node is connected to every other individual node in the clique. In this exercise you will identify the largest cliques in the Forrest Gump network. You will also identify the number of maximal cliques of various sizes. A clique is maximal if it cannot be extended to a larger clique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the largest cliques in the network</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">largest_cliques</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
+ 9/94 vertices, named, from 6dcdb3b:
[1] EMCEE   FORREST MEN     MAN #5  MAN #3  MAN #2  MAN #1  MAN #   JENNY  

[[2]]
+ 9/94 vertices, named, from 6dcdb3b:
[1] FORREST   LT DAN    STRONGARM SONG      SOLDIER   SGT SIMS  MAN      
[8] DALLAS    BUBBA    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine all maximal cliques in the network and assign to object 'clq'</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>clq <span class="ot">&lt;-</span> <span class="fu">max_cliques</span>(g)</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the size of each maximal clique.</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(clq, length)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 2  3  4  5  6  7  9 
12 24  7  2  4  2  2 </code></pre>
</div>
</div>
</section>
<section id="visualize-largest-cliques" class="level1">
<h1>Visualize largest cliques</h1>
<p>Often in network visualization you will need to subset part of a network to inspect the inter-connections of particular vertices. Here, you will create a visualization of the largest cliques in the Forrest Gump network. In the last exercise you determined that there were two cliques of size 9. You will plot these side-by-side after creating two new igraph objects by subsetting out these cliques from the main network. The function subgraph() enables you to choose which vertices to keep in a new network object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign largest cliques output to object 'lc'</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>lc <span class="ot">&lt;-</span> <span class="fu">largest_cliques</span>(g)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create two new undirected subgraphs, each containing only the vertices of each largest clique.</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>gs1 <span class="ot">&lt;-</span> <span class="fu">as.undirected</span>(<span class="fu">subgraph</span>(g, lc[[<span class="dv">1</span>]]))</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>gs2 <span class="ot">&lt;-</span> <span class="fu">as.undirected</span>(<span class="fu">subgraph</span>(g, lc[[<span class="dv">2</span>]]))</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the two largest cliques side-by-side</span></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) <span class="co"># To plot two plots side-by-side</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gs1,</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">0.9</span>,</span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">0</span>,</span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'gray28'</span>,</span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Largest Clique 1"</span>,</span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> <span class="fu">layout.circle</span>(gs1)</span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gs2,</span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, </span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">0.9</span>,</span>
<span id="cb106-27"><a href="#cb106-27" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">0</span>,</span>
<span id="cb106-28"><a href="#cb106-28" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">'gray28'</span>,</span>
<span id="cb106-29"><a href="#cb106-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Largest Clique 2"</span>,</span>
<span id="cb106-30"><a href="#cb106-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">layout =</span> <span class="fu">layout.circle</span>(gs2)</span>
<span id="cb106-31"><a href="#cb106-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/Visualize largest cliques-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="assortativity" class="level1">
<h1>Assortativity</h1>
<p>In this exercise you will determine the assortativity() of the second friendship network from the first chapter. This is a measure of how preferentially attached vertices are to other vertices with identical attributes. You will also determine the degree assortativity which determines how preferentially attached are vertices to other vertices of a similar degree.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the network</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the gender attribute into a numeric value</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">factor</span>(<span class="fu">V</span>(g1)<span class="sc">$</span>gender))</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the assortativity of the network based on gender</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">assortativity</span>(g1, values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1319444</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the assortativity degree of the network</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">assortativity.degree</span>(g1, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4615385</code></pre>
</div>
</div>
</section>
<section id="using-randomizations-to-assess-assortativity" class="level1">
<h1>Using randomizations to assess assortativity</h1>
<p>In this exercise you will determine how likely the observed assortativity in the friendship network is given the genders of vertices by performing a randomization procedure. You will randomly permute the gender of vertices in the network 1000 times and recalculate the assortativity for each random network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the observed assortativity</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>observed.assortativity <span class="ot">&lt;-</span> <span class="fu">assortativity</span>(g1, values)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the assortativity of the network randomizing the gender attribute 1000 times</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">'list'</span>, <span class="dv">1000</span>)</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  results[[i]] <span class="ot">&lt;-</span> <span class="fu">assortativity</span>(g1, <span class="fu">sample</span>(values))</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of assortativity values and add a red vertical line at the original observed value</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(results))</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> observed.assortativity, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">3</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reciprocity" class="level1">
<h1>Reciprocity</h1>
<p>The reciprocity of a directed network reflects the proportion of edges that are symmetrical. That is, the proportion of outgoing edges that also have an incoming edge. It is commonly used to determine how inter-connected directed networks are. An example of a such a network may be grooming exchanges in chimpanzees. Certain chimps may groom another but do not get groomed by that individual, whereas other chimps may both groom each other and so would have a reciprocal tie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a plot of the chimp grooming network</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(g,</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#      edge.color = "black",</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#      edge.arrow.size = 0.3,</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#      edge.arrow.width = 0.5)</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # Calculate the reciprocity of the graph</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co"># reciprocity(g)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="what-does-assortativity-measure" class="level2">
<h2 class="anchored" data-anchor-id="what-does-assortativity-measure">What does assortativity measure</h2>
<ul>
<li>How likely vertices are to connect to others that share some attribute in common.</li>
</ul>
</section>
</section>
<section id="fast-greedy-community-detection" class="level1">
<h1>Fast-greedy community detection</h1>
<p>The first community detection method you will try is fast-greedy community detection. You will use the Zachary Karate Club network. This social network contains 34 club members and 78 edges. Each edge indicates that those two club members interacted outside the karate club as well as at the club. Using this network you will determine how many sub-communities the network has and which club members belong to which subgroups. You will also plot the networks by community membership.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform fast-greedy community detection on network graph</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>kc <span class="ot">=</span> <span class="fu">fastgreedy.community</span>(g)</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine sizes of each community</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sizes</span>(kc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Community sizes
 1  2  3  4  5  6  7 
21 21 32  7  5  5  3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine which individuals belong to which community</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="fu">membership</span>(kc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           ABBIE HOFFMAN                ANCHORMAN                ANNOUNCER 
                       6                        1                        1 
             ANOTHER DAY          ASSISTANT COACH                     BERT 
                       1                        3                        5 
                   BILLY              BLACK WOMAN                 BOB HOPE 
                       2                        2                        1 
                     BOY                   BOY #1                   BOY #2 
                       2                        2                        2 
                  BOY #3                    BUBBA BUS STOP - PRESENT - DAY 
                       2                        1                        3 
              CAB DRIVER                    CARLA             CHET HUNTLEY 
                       2                        1                        3 
                  DALLAS                     DEAN              DICK CAVETT 
                       1                        3                        3 
              DICK CLARK                   DOCTOR           DRILL SERGEANT 
                       1                        3                        1 
                   ELVIS                    EMCEE                    ERNIE 
                       3                        4                        5 
          FOOTBALL COACH             AGING HIPPIE            BLACK PANTHER 
                       3                        3                        2 
              BUS DRIVER                       DJ                   DRIVER 
                       3                        2                        2 
                    EARL            ELDERLY WOMAN                  FORREST 
                       3                        1                        3 
                    GIRL                   HILARY                   ISABEL 
                       2                        6                        6 
              FORREST JR                    JENNY                   LENORE 
                       5                        2                        1 
                  LOUISE                   LT DAN               LITTLE BOY 
                       7                        1                        5 
              MALE NURSE                    MAN #                   MAN #1 
                       1                        4                        4 
                  MAN #2                   MAN #3                    MASAI 
                       4                        4                        2 
                  MAN #5                 MINISTER               NEWSCASTER 
                       4                        7                        3 
        GOVERNOR WALLACE                  NEWSMAN                    NIGHT 
                       3                        3                        1 
            OLDER BOY #1                  OFFICER                 MRS GUMP 
                       2                        3                        3 
                   RUBEN                      MAN                 SGT SIMS 
                       2                        1                        1 
                 SOLDIER                     SONG                POLICEMAN 
                       1                        1                        6 
                   MARGO        PRESIDENT JOHNSON              WHITE WOMAN 
                       1                        1                        2 
             SLOW MOTION                STRONGARM              JOHN LENNON 
                       2                        1                        3 
                     MEN              JENNY'S DAD               LYNN MARIE 
                       4                        2                        5 
                MRS BLUE                    NURSE             OLD SHRIMPER 
                       3                        3                        3 
            OLDER BOY #2        PRESIDENT KENNEDY                PRINCIPAL 
                       2                        3                        3 
                   SUSAN                      VET                   WESLEY 
                       7                        6                        2 
           WILD-EYED MAN             YOUNG HIPPIE                YOUNG MAN 
                       3                        2                        3 
              KATZENBACH                 REPORTER                OLDER BOY 
                       3                        3                        3 
                 PATRONS          PRESIDENT NIXON                 REVEREND 
                       3                        3                        3 
          SECURITY GUARD 
                       3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the community structure of the network</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kc, g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
</section>
<section id="edge-betweenness-community-detection" class="level1">
<h1>Edge-betweenness community detection</h1>
<p>An alternative community detection method is edge-betweenness. In this exercise you will repeat the community detection of the karate club using this method and compare the results visually to the fast-greedy method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform edge-betweenness community detection on network graph</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>gc <span class="ot">=</span> <span class="fu">edge.betweenness.community</span>(g)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine sizes of each community</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sizes</span>(gc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Community sizes
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 
 5  3  1 10  5 14  3  5  3  4  3  1  6  1  4  1  1  2  1  1  3  1  2  2  2  1 
27 28 29 30 31 32 33 34 35 
 1  1  1  1  1  1  1  1  1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot community networks determined by fast-greedy and edge-betweenness methods side-by-side</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kc, g)</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gc, g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="network_analysis_r_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
</section>
<section id="interactive-networks-with-threejs" class="level1">
<h1>Interactive networks with threejs</h1>
<p>In this course you have exclusively used igraph to make basic static network plots. There are many packages available to make network plots. One very useful one is threejs which allows you to make interactive network visualizations. This package also integrates seamlessly with igraph. In this exercise you will make a basic interactive network plot of the karate club network using the threejs package. Once you have produced the visualization be sure to move the network around with your mouse. You should be able to scroll in and out of the network as well as rotate the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(threejs)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a vertex attribute called 'color' to 'dodgerblue' </span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">set_vertex_attr</span>(g1, <span class="st">"color"</span>, <span class="at">value =</span> <span class="st">"dodgerblue"</span>)</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Redraw the graph and make the vertex size 1</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="fu">graphjs</span>(g1, <span class="at">vertex.size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="scatterplotThree html-widget html-fill-item-overflow-hidden html-fill-item" id="9b0bIeH4VB" style="width:100%;height:650px;"></div>
<script type="application/json" data-for="9b0bIeH4VB">{"x":{"NROW":19,"height":null,"width":null,"axis":false,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":[["#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF","#1E90FF"]],"size":1,"stroke":"black","flipy":true,"grid":false,"renderer":"auto","signif":8,"bg":"white","cexsymbols":1,"xlim":[-1,1],"ylim":[-1,1],"zlim":[-1,1],"axisscale":[1,1,1],"pch":["@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@"],"elementId":"9b0bIeH4VB","from":[[0,0,0,1,2,3,3,3,4,4,4,5,6,6,7,7,8,9,10,10,11,11,12,12,13]],"to":[[3,4,6,2,5,6,14,7,6,7,8,14,7,8,8,9,15,10,11,16,16,17,13,18,18]],"lwd":1,"linealpha":1,"center":true,"main":[""],"options":true,"alpha":[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],"vertices":[[0.72808391,-0.46641721,0.67355531,-0.86417277,-0.49082264,-0.70233967,-1,-0.50070052,-0.30131357,0.27205454,-0.41429586,0.39548658,1,-0.45088388,0.23345116,-0.88932214,-0.53902388,0.097473163,0.6847465,-0.48901348,0.29441984,0.70882057,-0.13146584,0.035292975,0.85998218,-0.67346138,-0.13011777,0.6833449,0.5567526,-0.17746755,0.4345191,0.82711031,-0.5814429,0.02423771,0.80283143,-0.87588234,-0.44014218,0.93461681,0.66062746,-0.31000902,0.87617946,1,-0.42041316,-0.5665224,0.32918725,0.72940912,-1,-0.59271173,0.38346102,0.96817694,-0.98009001,-0.35765758,0.58865756,-1,-0.054518408,1,0.76352624]],"xticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"yticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"zticklab":["1.00","0.60","0.20","-0.20","-0.60","-1.00"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1],"axislength":[1,1,1]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="sizing-vertices-in-threejs" class="level1">
<h1>Sizing vertices in threejs</h1>
<p>As with all network visualizations it is often worth adjusting the size of vertices to illustrate their relative importance. This is also straightforward in threejs. In this exercise you will create an interactive threejs plot of the karate club network and size vertices based on their relative eigenvector centrality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create numerical vector of vertex eigenvector centralities</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Create numerical vector of vertex eigenvector centralities</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>ec <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">eigen_centrality</span>(g)<span class="sc">$</span>vector )</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new vector 'v' that is equal to the square-root of 'ec' multiplied by 5</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">*</span><span class="fu">sqrt</span>(ec)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot threejs plot of graph setting vertex size to v</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="fu">graphjs</span>(g, <span class="at">vertex.size =</span> v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="scatterplotThree html-widget html-fill-item-overflow-hidden html-fill-item" id="akdqIxvOvq" style="width:100%;height:650px;"></div>
<script type="application/json" data-for="akdqIxvOvq">{"x":{"NROW":94,"height":null,"width":null,"axis":false,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":["#FFA500"],"size":[2.12084176260786,1.73902753137861,2.04593370803847,1.80299880533694,1.50196403521037,2.12084176260786,1.92145191629311,1.92145191629311,1.59474856479237,1.22375829864031,2.01378097311402,2.01378097311402,2.01378097311402,2.37521337252377,1.49662222526426,1.10970164799072,1.73174586451702,1.51249821305606,2.22552758696846,1.46708788366813,1.49662222526426,1.73174586451702,1.46708788366813,1.80299880533694,1.46708788366813,2.39878177984916,2.12084176260786,1.55013604913293,1.37822540517063,2.01378097311402,1.46708788366813,1.769447093024,1.769447093024,1.43377041557783,1.51264988467081,5,1.769447093024,2.12084176260786,2.12084176260786,2.12084176260786,4.02583512039286,1.73174586451702,2.2386085030207,2.91070025915355,2.12084176260786,1.52009515251025,2.39878177984916,2.39878177984917,2.39878177984917,2.39878177984917,2.01378097311402,2.39878177984917,2.12064081439468,1.9886523572403,0.670590108225352,1.90548637466692,1.80299880533694,1.87158792952075,1.43377041557783,1.82420654846708,2.01378097311402,2.2615365627181,2.22552758696846,2.32631145662754,2.37521337252377,2.12084176260786,0.93461133295273,1.45920728263392,1.92145191629311,2.01378097311402,2.22552758696846,1.49662222526426,2.39878177984917,1.769447093024,2.12084176260786,1.37822540517063,1.37822540517063,1.37822540517063,1.84311954060196,1.37822540517063,1.46708788366813,2.12064081439468,2.12084176260786,2.01378097311402,1.37822540517063,1.769447093024,1.48323535185594,1.43377041557783,1.47491700361015,1.44294136051896,1.37822540517063,1.43377041557783,1.37822540517063,1.37822540517063],"stroke":"black","flipy":true,"grid":false,"renderer":"auto","signif":8,"bg":"white","cexsymbols":1,"xlim":[-1,1],"ylim":[-1,1],"zlim":[-1,1],"axisscale":[1,1,1],"pch":["@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@"],"elementId":"akdqIxvOvq","from":[[0,0,1,1,1,1,1,2,2,2,3,3,3,4,4,5,5,6,7,7,8,9,10,10,10,10,10,11,11,11,11,12,12,12,13,13,13,13,13,13,14,14,15,16,16,4,17,17,17,18,18,19,19,20,16,21,21,21,22,3,13,23,23,23,24,25,25,25,25,25,25,25,26,27,0,28,3,5,6,29,7,8,13,30,14,18,20,31,32,33,34,24,25,26,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,36,0,37,37,37,0,37,38,38,38,5,6,29,31,32,26,35,39,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,33,35,16,35,41,5,26,39,35,40,42,42,13,18,35,43,43,43,43,5,26,39,44,45,34,46,46,46,47,47,47,47,46,48,48,48,46,49,49,43,29,50,51,35,40,42,43,52,30,22,35,42,40,42,53,35,54,40,55,56,35,27,35,9,40,57,35,40,35,35,58,59,35,35,29,40,50,60,35,18,35,61,62,62,35,2,18,35,43,61,63,13,18,35,43,61,62,63,64,61,0,40,65,29,6,40,53]],"to":[[40,65,35,43,66,59,67,35,40,43,13,56,64,27,35,26,39,7,40,68,43,40,11,12,35,40,69,12,35,40,69,35,40,69,18,61,56,62,63,70,20,71,40,35,43,17,27,35,54,61,70,35,59,71,21,35,41,43,35,23,23,35,56,64,59,40,46,47,48,49,51,72,39,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,37,38,73,71,44,74,45,61,46,47,48,49,51,50,72,75,53,56,76,77,57,78,65,79,80,60,70,81,82,83,68,84,85,86,39,36,40,37,40,65,82,38,38,40,65,82,40,40,40,40,40,40,40,40,73,44,43,74,46,47,48,49,51,50,72,78,69,81,83,85,87,87,41,41,43,44,44,44,42,42,43,81,43,43,43,61,62,70,81,74,74,74,74,63,61,51,72,47,48,49,51,72,48,49,51,72,49,51,72,66,50,83,72,52,52,52,52,81,59,59,59,59,53,53,55,55,55,55,88,64,58,89,89,57,57,78,90,65,67,91,91,80,88,92,60,60,60,83,93,62,62,62,63,70,69,63,63,63,63,63,70,64,64,64,64,64,64,64,70,70,82,82,82,83,68,68,86]],"lwd":1,"linealpha":1,"center":true,"main":[""],"options":true,"alpha":[1],"vertices":[[0.0095039469,-0.63847655,-0.048996591,0.57978958,0.58946502,0.6615387,0.27616423,-0.30515869,0.44080032,0.97223537,-0.098532857,0.51153558,0.7272954,-0.070699197,-0.42904279,-0.2641431,-0.097105441,-0.25692776,-0.072499197,-0.23058421,-0.47189171,0.087283983,-0.23499418,-0.42439103,0.49920331,0.37316892,0.81451757,-0.7109774,-0.77478837,-0.23479727,-0.23972273,0.2331507,-0.31778523,-0.15638759,0.30263178,-0.35740004,-0.27803157,0.11260566,-0.38755715,0.70429781,-0.1393911,0.61723017,0.5846547,-0.88330281,0.12428094,-1,-0.48582631,-0.19105964,0.76456417,0.40876103,0.42814857,0.61057837,0.057614918,-0.59590833,0.51147563,-0.20837435,0.80362721,0.3005909,0.38742123,0.9697622,0.5162066,-0.92762577,0.30073393,0.76589729,0.4167819,0.28169781,-0.0041476119,0.47696342,0.90759495,0.92048445,0.069991196,0.47569842,0.24410169,0.83077685,0.63977187,-0.60541062,0.23707613,0.16910318,-0.32704483,-0.17147735,-0.18727637,0.62419081,-0.20579229,-0.53270266,0.086776849,0.97356677,0.3024308,-0.34409272,-0.69660217,0.31498281,0.115372,0.25251785,0.98297866,-0.27297541,0.045315838,0.58390638,-0.47626651,-0.27438729,0.50822632,-0.11237222,-0.36917614,1,0.52662345,-0.72535161,0.67024971,0.1882357,-0.029716661,0.19244253,-0.30631389,-0.21980772,0.59253374,0.021124129,-0.5774336,-0.28729868,-0.11479264,-0.66354692,-0.23069968,-0.25054751,-0.22134084,-0.19628685,-0.19741469,-0.13395414,0.058189095,0.57099241,0.53836987,0.37769945,0.11523979,0.38551382,0.30330361,0.45810309,0.13056344,0.56587123,-0.37852426,-0.021789292,-0.12969581,0.89968639,-0.48382278,0.45527351,-0.52483669,0.34613149,0.033930991,-0.41914281,0.29457681,0.090599379,-0.53968707,0.08562473,0.19648305,-0.38870249,0.37256446,0.20135881,-0.27291134,-0.53501927,0.39934213,-0.43556192,0.32738897,0.32534204,0.0022854042,0.16509077,0.52869698,0.19147586,0.47221051,-0.068846944,0.65675987,0.32030097,-1,0.31268629,0.24758704,-0.40925009,0.91394355,-0.1155516,0.38436636,-0.40681188,-0.58411818,-0.076570313,0.79933994,-0.54399891,-0.20800009,0.2257308,0.56779578,0.71558957,-0.38584329,-0.48233964,0.41166128,0.59913656,-0.35630477,0.74009893,0.60795339,-0.10143769,0.77810987,0.62560381,-0.35221631,0.58491173,0.78645165,-0.086199425,0.67547177,0.073136358,-0.51677397,-0.17406515,0.81882418,0.71760477,0.95786139,0.69292309,0.75169296,0.34208074,0.031747033,-0.038569331,-0.44167482,-0.3851536,0.26116314,-0.28066189,0.6379947,-0.18815097,0.89162479,0.41588237,-1,0.14933393,-0.49893447,0.21692332,0.27492484,-0.62066019,-0.22118321,0.2215786,-0.41916234,-0.22759375,-0.12225464,0.48629789,-0.77579897,-0.26525916,0.15222112,0.66703627,-0.42020736,1,-0.054211049,-0.10892052,-0.22813662,-0.68417295,0.04003631,0.18653793,-0.87802538,0.66902128,0.017360311,0.72883212,0.74842779,0.09106355,0.22574962,0.44088135,0.073603107,-0.69419171,-0.14381203,-0.43993615,-0.54236916,0.23859411,0.042543584,1,0.025011563,-0.090105335,-0.74947034,0.30006905,0.42918847,0.80975692,-0.069521453,-0.01187929,-0.56255593,0.94125928,0.58881753,0.34173248,-0.41548957,0.49511531,-0.45123256,-0.55324219,-0.11478223,0.84537407,-0.11491794,0.82071397,-0.54781975,-0.039903714,0.48136872,0.64951405,-0.37136482,0.80450736,0.5828496,-0.14965702]],"xticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"yticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"zticklab":["1.00","0.60","0.20","-0.20","-0.60","-1.00"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1],"axislength":[1,1,1]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="d-community-network-graph" class="level1">
<h1>3D community network graph</h1>
<p>Finally in this exercise you will create an interactive threejs plot with the vertices based on their community membership as produced by the fast-greedy community detection method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create an object 'i' containin the memberships of the fast-greedy community detection</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span>  <span class="fu">membership</span>(kc)</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the number of different communities</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sizes</span>(kc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Community sizes
 1  2  3  4  5  6  7 
21 21 32  7  5  5  3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a color attribute to each vertex, setting the vertex color based on community membership</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">set_vertex_attr</span>(g, <span class="st">"color"</span>, <span class="at">value =</span> <span class="fu">c</span>(<span class="st">"yellow"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>)[i])</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the graph using threejs</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="fu">graphjs</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="scatterplotThree html-widget html-fill-item-overflow-hidden html-fill-item" id="bbGWaMU2Va" style="width:100%;height:650px;"></div>
<script type="application/json" data-for="bbGWaMU2Va">{"x":{"NROW":94,"height":null,"width":null,"axis":false,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":[["#FFFFFF","#FFFF00","#FFFF00","#FFFF00","#FF0000","#FFFFFF","#0000FF","#0000FF","#FFFF00","#0000FF","#0000FF","#0000FF","#0000FF","#FFFF00","#FF0000","#0000FF","#FFFF00","#FF0000","#FFFF00","#FF0000","#FF0000","#FFFF00","#FF0000","#FFFF00","#FF0000","#FFFFFF","#FFFFFF","#FF0000","#FF0000","#0000FF","#FF0000","#0000FF","#0000FF","#FF0000","#FFFF00","#FF0000","#0000FF","#FFFFFF","#FFFFFF","#FFFFFF","#0000FF","#FFFF00","#FFFFFF","#FFFF00","#FFFFFF","#FFFF00","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#0000FF","#FFFFFF","#FFFFFF","#FF0000","#FF0000","#FF0000","#FFFF00","#0000FF","#FF0000","#FF0000","#0000FF","#FFFF00","#FFFF00","#FFFF00","#FFFF00","#FFFFFF","#FFFF00","#FFFF00","#0000FF","#0000FF","#FFFF00","#FF0000","#FFFFFF","#0000FF","#FFFFFF","#FF0000","#FF0000","#FF0000","#0000FF","#FF0000","#FF0000","#FFFFFF","#FFFFFF","#0000FF","#FF0000","#0000FF","#FF0000","#FF0000","#FF0000","#FF0000","#FF0000","#FF0000","#FF0000","#FF0000"]],"size":2,"stroke":"black","flipy":true,"grid":false,"renderer":"auto","signif":8,"bg":"white","cexsymbols":1,"xlim":[-1,1],"ylim":[-1,1],"zlim":[-1,1],"axisscale":[1,1,1],"pch":["@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@"],"elementId":"bbGWaMU2Va","from":[[0,0,1,1,1,1,1,2,2,2,3,3,3,4,4,5,5,6,7,7,8,9,10,10,10,10,10,11,11,11,11,12,12,12,13,13,13,13,13,13,14,14,15,16,16,4,17,17,17,18,18,19,19,20,16,21,21,21,22,3,13,23,23,23,24,25,25,25,25,25,25,25,26,27,0,28,3,5,6,29,7,8,13,30,14,18,20,31,32,33,34,24,25,26,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,36,0,37,37,37,0,37,38,38,38,5,6,29,31,32,26,35,39,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,33,35,16,35,41,5,26,39,35,40,42,42,13,18,35,43,43,43,43,5,26,39,44,45,34,46,46,46,47,47,47,47,46,48,48,48,46,49,49,43,29,50,51,35,40,42,43,52,30,22,35,42,40,42,53,35,54,40,55,56,35,27,35,9,40,57,35,40,35,35,58,59,35,35,29,40,50,60,35,18,35,61,62,62,35,2,18,35,43,61,63,13,18,35,43,61,62,63,64,61,0,40,65,29,6,40,53]],"to":[[40,65,35,43,66,59,67,35,40,43,13,56,64,27,35,26,39,7,40,68,43,40,11,12,35,40,69,12,35,40,69,35,40,69,18,61,56,62,63,70,20,71,40,35,43,17,27,35,54,61,70,35,59,71,21,35,41,43,35,23,23,35,56,64,59,40,46,47,48,49,51,72,39,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,37,38,73,71,44,74,45,61,46,47,48,49,51,50,72,75,53,56,76,77,57,78,65,79,80,60,70,81,82,83,68,84,85,86,39,36,40,37,40,65,82,38,38,40,65,82,40,40,40,40,40,40,40,40,73,44,43,74,46,47,48,49,51,50,72,78,69,81,83,85,87,87,41,41,43,44,44,44,42,42,43,81,43,43,43,61,62,70,81,74,74,74,74,63,61,51,72,47,48,49,51,72,48,49,51,72,49,51,72,66,50,83,72,52,52,52,52,81,59,59,59,59,53,53,55,55,55,55,88,64,58,89,89,57,57,78,90,65,67,91,91,80,88,92,60,60,60,83,93,62,62,62,63,70,69,63,63,63,63,63,70,64,64,64,64,64,64,64,70,70,82,82,82,83,68,68,86]],"lwd":1,"linealpha":1,"center":true,"main":[""],"options":true,"alpha":[[0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1]],"vertices":[[0.43978408,0.45398735,-0.11224894,0.54814979,-0.20327862,-0.77227603,0.72749902,0.018773806,-0.012322457,0.41906568,-0.75493092,-0.44704497,-0.45456593,-0.50272762,0.40315563,-0.22407704,0.11098138,0.50700261,-0.16456024,0.35506446,-0.13445299,-0.12211977,0.45886232,0.010871078,0.7062874,-0.25972098,-0.69293257,0.18867431,1,0.58022137,0.50885958,0.13074887,0.94380153,0.53966811,-0.0088804323,0.85099339,0.56101434,0.13028175,0.77722828,0.63667923,-0.56325932,-0.36365506,-0.36133226,-0.65297085,-0.17305955,0.1803938,0.96857915,0.94232598,0.98574321,-0.40785878,0.074967988,-0.55123993,-0.35289612,0.63311868,0.8720925,-0.52001953,-0.36891889,-0.043251436,-0.035811837,-0.79317265,-0.24433398,-0.73392763,-0.33889952,0.8790386,-0.45961877,0.16708575,-0.12944311,-0.39941559,-0.74415128,0.48081445,-0.82142262,-0.20299284,-0.012019313,-0.52552699,-0.61928999,0.69001367,0.39257699,0.61096401,-0.14919276,0.29052353,0.38672742,-0.37393291,-0.58463254,0.588388,0.65000391,-0.67094378,0.74412273,0.065539498,-0.089106593,0.75166086,0.14606639,-0.4194927,-0.83277641,0.09349639,0.46722709,0.060375666,0.10674949,0.2548718,0.90321529,-0.49517027,-0.1956866,-0.44209737,0.70553516,-0.77450529,0.18752624,0.23153309,-0.19305502,0.13792305,-0.11112997,0.46160554,0.64523017,0.33904967,0.53423836,-0.0030375754,0.1579411,0.39261217,-0.22168181,-0.15123384,0.25073631,0.58863024,0.20641166,0.29234834,0.41785529,0.97596412,-0.28894576,0.1927764,0.23459124,0.012938545,-0.20158788,0.69757731,-0.21709085,-0.21160429,-0.23808586,0.21378376,0.49911705,0.89834112,-0.030460748,-0.45318051,0.6088428,0.39435211,0.39611503,0.52525739,0.49028341,0.47600506,0.48509473,0.41524093,0.61133081,0.56648723,0.4159832,0.29828075,0.21028867,-0.10653671,0.76785513,0.6758596,0.32054469,0.4141962,0.47843574,0.13475394,-0.14205003,-0.16190073,0.021845133,0.05152345,-1,-0.21454964,0.90410529,-0.43315475,-0.011620517,0.5209999,0.44564812,-0.75995861,-0.3141442,0.16893936,0.65046419,0.43222528,0.042059752,-0.83400277,0.61783774,0.097517259,-0.24659242,-0.70463484,0.2138425,-0.041979648,0.89560729,0.79445505,-0.57307995,-0.11954577,0.76989442,-0.43556827,-0.4488817,0.84637838,-0.25962223,-0.28118692,0.64959849,-0.57580964,-0.25468594,0.19337056,0.53756991,-0.087272636,0.97473565,-0.24343668,-1,0.34678924,-0.061794888,-0.87588588,-0.18156778,0.34866186,0.057054197,0.64405778,0.043053546,0.69591014,0.87475682,-0.44726095,-0.22343782,-0.27469311,-0.79932743,-0.081026268,0.59051216,0.29008042,0.49959092,0.27696197,0.17284791,0.89378551,-0.26653304,0.22392265,0.32406536,0.074315114,-0.57438466,0.99804103,0.0143866,-0.94859758,0.067914507,0.28341925,-1,0.26605426,0.07646658,0.50185879,0.33655546,1,-0.40953237,0.57622462,-0.19046052,-0.23346599,-0.71824989,0.52986144,0.042648054,-0.082954377,0.32520333,0.37955344,-0.22223772,0.049894831,-0.0075891315,0.92220693,-0.3548311,-0.74322768,0.35596701,-0.056408142,0.22466468,0.91382955,-0.46633537,-0.078949686,-0.19993688,-0.49060198,-0.34827107,-0.30234147,-0.59055421,-0.20440213,0.25906884,-0.21404857,-0.78576167,0.48079271,0.56173912,-0.48459421,1,0.10119279,-0.79574372,0.81437379,0.31141236,-0.63146547,0.98113029,0.41542374,-0.8374043,0.57731868]],"xticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"yticklab":["-1.00","-0.60","-0.20","0.20","0.60","1.00"],"zticklab":["1.00","0.60","0.20","-0.20","-0.60","-1.00"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1],"axislength":[1,1,1]},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>